(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7390,5922],{62898:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...u},m)=>(0,a.createElement)("svg",{ref:m,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(l)/Number(s):l,className:["lucide",`lucide-${i(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},86264:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},31541:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},82549:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2933:function(e,t,r){Promise.resolve().then(r.bind(r,81288))},81288:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(57437),n=r(2265),i=r(24033),s=r(50116),l=r(40386),o=r(6678),c=r(45922),d=r(27815),u=r(85754),m=r(45179),f=r(49842),h=r(45509),p=r(25703),x=r(82549),g=r(31541),b=r(86264);let v="car-images",w=["image/jpeg","image/jpg","image/png","image/webp"],y=/\.(jpe?g|png|webp)$/i,j=["automatic","manual"],N=["petrol","diesel","electric","hybrid"],k=["excellent","good","fair"];function C(){let e=(0,s.useLocale)()||"en",t=(0,i.useRouter)(),{user:r}=(0,o.useAuthContext)(),{toast:l}=(0,p.useToast)(),C=(0,n.useRef)(null),[F,S]=(0,n.useState)({make:"",model:"",year:"",price:"",mileage:"",transmission:"",fuel_type:"",condition:"",location:"",description:""}),[_,I]=(0,n.useState)([]),[R,E]=(0,n.useState)([]),[P,A]=(0,n.useState)(!1),[U,Z]=(0,n.useState)(null),[M,B]=(0,n.useState)({}),$=(0,n.useCallback)(e=>{I(t=>t.filter((t,r)=>r!==e)),E(t=>{var r;let a=[...t];return URL.revokeObjectURL(null!==(r=a[e])&&void 0!==r?r:""),a.filter((t,r)=>r!==e)})},[]),O=(0,n.useCallback)(e=>{var t;let r=Array.from(null!==(t=e.target.files)&&void 0!==t?t:[]),a=[],n=[];for(let e of r){let t=function(e){let t=e.name.toLowerCase();return y.test(t)||w.includes(e.type)?e.size>5242880?"File too large: ".concat(e.name,". Max 5MB each."):null:"Invalid type: ".concat(e.name,". Use jpg, jpeg, png, or webp.")}(e);t?n.push(t):a.push(e)}n.length&&l({title:"Invalid files",description:n[0],variant:"destructive"});let i=[..._,...a].slice(0,6);I(i);let s=i.map(e=>URL.createObjectURL(e));E(e=>(e.forEach(e=>URL.revokeObjectURL(e)),s)),e.target.value=""},[_,l]),z=async a=>{if(a.preventDefault(),!(null==r?void 0:r.id))return;let n={};F.make.trim()||(n.make="Make is required"),F.model.trim()||(n.model="Model is required");let i=parseInt(F.year,10);(!F.year||isNaN(i)||i<1900||i>2100)&&(n.year="Valid year (1900–2100) required");let s=parseFloat(F.price);(!F.price||isNaN(s)||s<0)&&(n.price="Valid price required");let o=parseInt(F.mileage,10);if((!F.mileage||isNaN(o)||o<0)&&(n.mileage="Valid mileage required"),F.transmission||(n.transmission="Select transmission"),F.fuel_type||(n.fuel_type="Select fuel type"),F.condition||(n.condition="Select condition"),F.location.trim()||(n.location="Location is required"),(_.length<1||_.length>6)&&(n.images="Add ".concat(1,"–").concat(6," images (jpg, jpeg, png, webp, max 5MB each).")),B(n),Object.keys(n).length){l({title:"Validation error",description:"Please fix the fields above.",variant:"destructive"});return}A(!0),Z({current:0,total:_.length}),l({title:"Uploading images...",duration:4e3});try{let a="".concat(r.id),n=[];for(let e=0;e<_.length;e++){var d,u;Z({current:e+1,total:_.length});let t=_[e],r=(null!==(u=null===(d=t.name.match(/\.(jpe?g|png|webp)$/i))||void 0===d?void 0:d[0])&&void 0!==u?u:".jpg").toLowerCase().replace(/^\./,""),i="".concat(Date.now(),"-").concat(e,".").concat(r),s="".concat(a,"/").concat(i),{error:l}=await c.supabase.storage.from(v).upload(s,t,{contentType:t.type,upsert:!1});if(l)throw l;let{data:o}=c.supabase.storage.from(v).getPublicUrl(s);n.push(o.publicUrl)}Z(null);let m="".concat(F.make.trim()," ").concat(F.model.trim()," ").concat(F.year).trim(),f={user_id:r.id,title:m,make:F.make.trim(),model:F.model.trim(),year:i,price:s,mileage:o,transmission:F.transmission,fuel_type:F.fuel_type,condition:F.condition,location:F.location.trim(),description:F.description.trim()||null,images:n,is_sold:!1,status:"active"},{error:h}=await c.supabase.from("car_listings").insert(f);if(h)throw h;l({title:"Success",description:"Car listed successfully!"}),t.push("/".concat(e,"/my-listings?success=listing-created"))}catch(e){Z(null),l({title:"Error",description:e instanceof Error?e.message:"Failed to create listing",variant:"destructive"})}finally{A(!1)}};return(0,a.jsx)("div",{className:"container px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:(0,a.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,a.jsxs)(d.Zb,{className:"border-[#2a2d3a] bg-[#1a1d29]",children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsx)(d.ll,{className:"text-white",children:"Sell your car"}),(0,a.jsx)(d.SZ,{className:"text-[#94a3b8]",children:"Add your listing. All fields are required except description."})]}),(0,a.jsx)(d.aY,{children:(0,a.jsxs)("form",{onSubmit:z,className:"space-y-5",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"make",className:"text-white",children:"Make"}),(0,a.jsx)(m.I,{id:"make",value:F.make,onChange:e=>S(t=>({...t,make:e.target.value})),className:"border-[#2a2d3a] bg-[#0f1117] text-white",placeholder:"e.g. Toyota",disabled:P}),M.make&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.make})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"model",className:"text-white",children:"Model"}),(0,a.jsx)(m.I,{id:"model",value:F.model,onChange:e=>S(t=>({...t,model:e.target.value})),className:"border-[#2a2d3a] bg-[#0f1117] text-white",placeholder:"e.g. Camry",disabled:P}),M.model&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.model})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"year",className:"text-white",children:"Year"}),(0,a.jsx)(m.I,{id:"year",type:"number",min:1900,max:2100,value:F.year,onChange:e=>S(t=>({...t,year:e.target.value})),className:"border-[#2a2d3a] bg-[#0f1117] text-white",placeholder:"2020",disabled:P}),M.year&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.year})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"price",className:"text-white",children:"Price (USD)"}),(0,a.jsx)(m.I,{id:"price",type:"number",min:0,step:1,value:F.price,onChange:e=>S(t=>({...t,price:e.target.value})),className:"border-[#2a2d3a] bg-[#0f1117] text-white",placeholder:"25000",disabled:P}),M.price&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.price})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"mileage",className:"text-white",children:"Mileage (km)"}),(0,a.jsx)(m.I,{id:"mileage",type:"number",min:0,value:F.mileage,onChange:e=>S(t=>({...t,mileage:e.target.value})),className:"border-[#2a2d3a] bg-[#0f1117] text-white",placeholder:"50000",disabled:P}),M.mileage&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.mileage})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{className:"text-white",children:"Transmission"}),(0,a.jsxs)(h.Ph,{value:F.transmission||void 0,onValueChange:e=>S(t=>({...t,transmission:e})),disabled:P,children:[(0,a.jsx)(h.i4,{className:"border-[#2a2d3a] bg-[#0f1117] text-white",children:(0,a.jsx)(h.ki,{placeholder:"Select"})}),(0,a.jsx)(h.Bw,{className:"bg-[#1a1d29] border-[#2a2d3a]",children:j.map(e=>(0,a.jsx)(h.Ql,{value:e,className:"text-white focus:bg-[#2a2d3a]",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),M.transmission&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.transmission})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{className:"text-white",children:"Fuel type"}),(0,a.jsxs)(h.Ph,{value:F.fuel_type||void 0,onValueChange:e=>S(t=>({...t,fuel_type:e})),disabled:P,children:[(0,a.jsx)(h.i4,{className:"border-[#2a2d3a] bg-[#0f1117] text-white",children:(0,a.jsx)(h.ki,{placeholder:"Select"})}),(0,a.jsx)(h.Bw,{className:"bg-[#1a1d29] border-[#2a2d3a]",children:N.map(e=>(0,a.jsx)(h.Ql,{value:e,className:"text-white focus:bg-[#2a2d3a]",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),M.fuel_type&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.fuel_type})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{className:"text-white",children:"Condition"}),(0,a.jsxs)(h.Ph,{value:F.condition||void 0,onValueChange:e=>S(t=>({...t,condition:e})),disabled:P,children:[(0,a.jsx)(h.i4,{className:"border-[#2a2d3a] bg-[#0f1117] text-white",children:(0,a.jsx)(h.ki,{placeholder:"Select"})}),(0,a.jsx)(h.Bw,{className:"bg-[#1a1d29] border-[#2a2d3a]",children:k.map(e=>(0,a.jsx)(h.Ql,{value:e,className:"text-white focus:bg-[#2a2d3a]",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),M.condition&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.condition})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"location",className:"text-white",children:"Location"}),(0,a.jsx)(m.I,{id:"location",value:F.location,onChange:e=>S(t=>({...t,location:e.target.value})),className:"border-[#2a2d3a] bg-[#0f1117] text-white",placeholder:"City, Country",disabled:P}),M.location&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.location})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"description",className:"text-white",children:"Description (optional)"}),(0,a.jsx)("textarea",{id:"description",rows:3,value:F.description,onChange:e=>S(t=>({...t,description:e.target.value})),className:"flex w-full rounded-md border border-[#2a2d3a] bg-[#0f1117] px-3 py-2 text-sm text-white placeholder:text-[#94a3b8] focus:outline-none focus:ring-2 focus:ring-[#5B7FFF]",placeholder:"Additional details...",disabled:P})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(f._,{className:"text-white",children:["Images (",1,"–",6,")"]}),(0,a.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"JPG, JPEG, PNG, or WEBP. Max 5MB each."}),(0,a.jsx)("input",{ref:C,type:"file",accept:".jpg,.jpeg,.png,.webp,image/jpeg,image/png,image/webp",multiple:!0,className:"hidden",onChange:O}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[R.map((e,t)=>(0,a.jsxs)("div",{className:"relative w-24 h-24 rounded-lg overflow-hidden border border-[#2a2d3a] bg-[#2a2d3a]",children:[(0,a.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full object-cover"}),!P&&(0,a.jsx)("button",{type:"button",onClick:()=>$(t),className:"absolute top-1 right-1 rounded-full bg-black/60 p-1 text-white hover:bg-black/80","aria-label":"Remove",children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})})]},t)),_.length<6&&!P&&(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},className:"w-24 h-24 rounded-lg border-2 border-dashed border-[#2a2d3a] flex items-center justify-center text-[#94a3b8] hover:border-[#5B7FFF] hover:text-[#5B7FFF]",children:(0,a.jsx)(g.Z,{className:"h-6 w-6"})})]}),M.images&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:M.images})]}),U&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-[#94a3b8]",children:["Uploading image ",U.current," of ",U.total,"…"]}),(0,a.jsx)("div",{className:"h-2 rounded-full bg-[#2a2d3a] overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#5B7FFF] transition-all duration-300",style:{width:"".concat(U.current/U.total*100,"%")}})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)(u.z,{type:"button",variant:"outline",className:"border-[#2a2d3a] text-white",onClick:()=>t.push("/".concat(e,"/my-listings")),disabled:P,children:"Cancel"}),(0,a.jsx)(u.z,{type:"submit",className:"bg-[#5B7FFF] hover:bg-[#5B7FFF]/90 text-white",disabled:P,children:P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2 animate-spin"}),U?"Uploading…":"Creating…"]}):"Create listing"})]})]})})]})})})}function F(){return(0,a.jsx)(l.i,{redirectTo:"register",children:(0,a.jsx)(C,{})})}},40386:function(e,t,r){"use strict";r.d(t,{i:function(){return c}});var a=r(57437),n=r(2265),i=r(24033),s=r(50116),l=r(6678),o=r(58148);function c(e){let{children:t,redirectTo:r="login"}=e,{user:c,loading:d}=(0,l.useAuthContext)(),u=(0,i.useRouter)(),m=(0,i.usePathname)(),f=(0,s.useLocale)()||"en";return((0,n.useEffect)(()=>{if(d||c)return;let e="register"===r?"/".concat(f,"/register"):"/".concat(f,"/login"),t="".concat(e,"?returnUrl=").concat(encodeURIComponent(m||"/".concat(f)));u.push(t)},[c,d,m,f,u,r]),d)?(0,a.jsx)("div",{className:"flex min-h-[calc(100vh-200px)] items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(o.T,{size:"lg",className:"text-[#5B7FFF]"}),(0,a.jsx)("p",{className:"text-[#94a3b8]",children:"Checking authentication..."})]})}):c?(0,a.jsx)(a.Fragment,{children:t}):null}},58148:function(e,t,r){"use strict";r.d(t,{T:function(){return l}});var a=r(57437),n=r(86264),i=r(1657);let s={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};function l(e){let{size:t="md",className:r,color:l="text-[#5B7FFF]"}=e;return(0,a.jsx)(n.Z,{className:(0,i.cn)("animate-spin",s[t],l,r)})}},85754:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var a=r(57437),n=r(2265),i=r(67256),s=r(1657);let l=n.forwardRef((e,t)=>{let{className:r,variant:n="default",size:l="default",asChild:o=!1,...c}=e,d=o?i.g7:"button";return(0,a.jsx)(d,{className:(0,s.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-[#5B7FFF] text-white hover:bg-[#4a6fff]",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-slate-300 dark:border-[#2a2d3a] bg-transparent hover:bg-slate-100 dark:hover:bg-[#2a2d3a] text-slate-900 dark:text-white",secondary:"bg-slate-100 dark:bg-[#2a2d3a] text-slate-900 dark:text-white hover:bg-slate-200 dark:hover:bg-[#3a3d4a]",ghost:"hover:bg-slate-100 dark:hover:bg-[#2a2d3a] text-slate-900 dark:text-white",link:"text-[#5B7FFF] underline-offset-4 hover:underline"}[n],{default:"h-10 sm:h-10 px-4 py-2 min-h-[48px] sm:min-h-[40px]",sm:"h-9 sm:h-9 rounded-md px-3 min-h-[48px] sm:min-h-[36px]",lg:"h-11 sm:h-11 rounded-md px-8 min-h-[48px] sm:min-h-[44px]",icon:"h-10 w-10 sm:h-10 sm:w-10 min-h-[48px] min-w-[48px] sm:min-h-[40px] sm:min-w-[40px]"}[l],r),ref:t,...c})});l.displayName="Button"},27815:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},ll:function(){return o}});var a=r(57437),n=r(2265),i=r(1657);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] text-slate-900 dark:text-white shadow-sm",r),...n})});s.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900 dark:text-white",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-slate-600 dark:text-[#94a3b8]",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},45179:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var a=r(57437),n=r(2265),i=r(1657);let s=n.forwardRef((e,t)=>{let{className:r,type:n,...s}=e;return(0,a.jsx)("input",{type:n,className:(0,i.cn)("flex w-full rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-white/[0.03] backdrop-blur-sm px-4 py-3 min-h-[48px] text-base text-start text-slate-900 dark:text-white/90 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-400 dark:placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/30 focus-visible:ring-offset-2 focus-visible:border-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-300 hover:border-indigo-500/50 dark:hover:border-indigo-500/50 hover:bg-slate-50 dark:hover:bg-white/[0.05] touch-manipulation",r),ref:t,...s})});s.displayName="Input"},49842:function(e,t,r){"use strict";r.d(t,{_:function(){return s}});var a=r(57437),n=r(2265),i=r(1657);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("label",{ref:t,className:(0,i.cn)("text-sm font-medium leading-none text-white peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});s.displayName="Label"},45509:function(e,t,r){"use strict";r.d(t,{Bw:function(){return f},Ph:function(){return d},Ql:function(){return h},i4:function(){return u},ki:function(){return m}});var a=r(57437),n=r(2265),i=r(58527),s=r(1657),l=r(83523),o=r(62442);let c=n.createContext(void 0),d=e=>{let{value:t,onValueChange:r,disabled:n,children:s,id:l,name:o}=e;return(0,a.jsx)(c.Provider,{value:{value:t,onValueChange:r,id:l},children:(0,a.jsx)(i.fC,{value:t,onValueChange:r,disabled:n,name:o,children:s})})};d.displayName="Select";let u=n.forwardRef((e,t)=>{let{className:r,children:o,...d}=e,u=n.useContext(c);return(0,a.jsxs)(i.xz,{ref:t,id:null==u?void 0:u.id,className:(0,s.cn)("flex min-h-[44px] w-full items-center justify-between rounded-lg border border-slate-200/80 dark:border-white/10 bg-slate-50/90 dark:bg-white/[0.05] backdrop-blur-sm px-4 py-3 text-base text-slate-900 dark:text-slate-100 ring-offset-2 ring-offset-white dark:ring-offset-slate-950 placeholder:text-slate-500 dark:placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:focus:border-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-all duration-200 hover:border-slate-300 dark:hover:border-white/20 hover:bg-slate-100/80 dark:hover:bg-white/[0.08]",r),...d,children:[o,(0,a.jsx)(i.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.xz.displayName;let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(i.B4,{ref:t,className:(0,s.cn)("block truncate",r),...n})});m.displayName=i.B4.displayName;let f=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,a.jsx)(i.h_,{children:(0,a.jsx)(i.VY,{ref:t,className:(0,s.cn)("relative z-[1200] min-w-[8rem] overflow-hidden rounded-card border border-slate-200/80 dark:border-white/10 bg-white/98 dark:bg-slate-900/98 backdrop-blur-xl text-slate-900 dark:text-slate-100 shadow-glass","max-h-[60vh]","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-md:!transform-none max-md:!fixed max-md:!left-0 max-md:!right-0 max-md:!bottom-0 max-md:!top-auto max-md:!w-full max-md:!min-w-0 max-md:!h-[60vh] max-md:!max-h-[60vh] max-md:!rounded-t-2xl max-md:!rounded-b-none max-md:pb-[env(safe-area-inset-bottom)] max-md:data-[state=open]:slide-in-from-bottom max-md:border-t",r),...l,position:"item-aligned",children:(0,a.jsx)(i.l_,{className:(0,s.cn)("p-1 overflow-y-auto overscroll-contain max-h-[60vh]","max-md:!w-full max-md:min-w-0 max-md:!max-h-[60vh] max-md:overflow-y-auto"),children:n})})})});f.displayName=i.VY.displayName;let h=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,a.jsxs)(i.ck,{ref:t,className:(0,s.cn)("relative flex w-full cursor-pointer select-none items-center rounded-lg py-3 md:py-2.5 pl-8 pr-3 text-sm min-h-[44px] md:min-h-0 outline-none focus:bg-slate-100 dark:focus:bg-white/10 focus:text-slate-900 dark:focus:text-slate-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [touch-action:manipulation]",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(i.eT,{children:n})]})});h.displayName=i.ck.displayName},6678:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return l},useAuthContext:function(){return o}});var a=r(57437),n=r(2265),i=r(45922);let s=(0,n.createContext)(null);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[m,f]=(0,n.useState)(!0),h=(0,n.useCallback)(async e=>{var t;let{data:r,error:a}=await i.supabase.from("users").select("role").eq("id",e).maybeSingle();return a||!r?null:null!==(t=r.role)&&void 0!==t?t:null},[]),p=(0,n.useCallback)(async()=>{try{let{data:{session:e},error:t}=await i.supabase.auth.getSession();if(t||!e){c(null),l(null),u(null);return}c(e),l(e.user),f(!1);try{let t=await h(e.user.id);u(t)}catch(e){u(null)}}catch(e){c(null),l(null),u(null)}finally{f(!1)}},[h]);(0,n.useEffect)(()=>{p();let{data:{subscription:e}}=i.supabase.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_OUT"===e||!t){c(null),l(null),u(null),f(!1);return}c(t),l(t.user);try{let e=await h(t.user.id);u(e)}finally{f(!1)}}),t=setTimeout(()=>{f(e=>!e&&e)},8e3);return()=>{clearTimeout(t),e.unsubscribe()}},[p,h]);let x=(0,n.useCallback)(async()=>{f(!0),await i.supabase.auth.signOut(),c(null),l(null),u(null),f(!1)},[]),g=(0,n.useMemo)(()=>({user:r,session:o,role:d,isAdmin:"admin"===d,loading:m,signOut:x}),[r,o,d,m,x]);return(0,a.jsx)(s.Provider,{value:g,children:t})}function o(){let e=(0,n.useContext)(s);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},25703:function(e,t,r){"use strict";r.r(t),r.d(t,{ToastProvider:function(){return l},useToast:function(){return o}});var a=r(57437),n=r(2265),i=r(1657);let s=n.createContext({toast:()=>{}});function l(e){let{children:t}=e,[r,l]=n.useState([]),o=n.useCallback(e=>{var t;let r=Math.random().toString(36).substring(7);l(t=>[...t,{...e,id:r}]),setTimeout(()=>{l(e=>e.filter(e=>e.id!==r))},null!==(t=e.duration)&&void 0!==t?t:5e3)},[]);return(0,a.jsxs)(s.Provider,{value:{toast:o},children:[t,(0,a.jsx)("div",{className:"fixed bottom-0 right-0 z-[1200] flex w-full flex-col-reverse gap-2 p-4 sm:flex-col md:max-w-[420px]",children:r.map(e=>(0,a.jsxs)("div",{className:(0,i.cn)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all","destructive"===e.variant?"border border-red-500/50 bg-red-950/30":"border border-[#2a2d3a] bg-[#1a1d29]"),children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[e.title&&(0,a.jsx)("div",{className:(0,i.cn)("text-sm font-semibold","destructive"===e.variant?"text-red-200":"text-white"),children:e.title}),e.description&&(0,a.jsx)("div",{className:(0,i.cn)("text-sm","destructive"===e.variant?"text-red-300/90":"text-[#94a3b8]"),children:e.description})]}),(0,a.jsx)("button",{onClick:()=>l(t=>t.filter(t=>t.id!==e.id)),className:"absolute right-2 top-2 rounded-md p-1 text-[#94a3b8] opacity-0 transition-opacity hover:text-white focus:opacity-100 focus:outline-none group-hover:opacity-100",children:"\xd7"})]},e.id))})]})}function o(){return n.useContext(s)||{toast:e=>{"destructive"===e.variant&&console.error("Error:",e.description)}}}},45922:function(e,t,r){"use strict";r.d(t,{supabase:function(){return a}});let a=(0,r(33226).eI)("https://fehkzrrahgyesxzrwlme.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZlaGt6cnJhaGd5ZXN4enJ3bG1lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxNzcwNjEsImV4cCI6MjA4NDc1MzA2MX0.AI8QaX8nOP8UwcfmgbGN2EN4jmK94i98Kpd3ZtPDZRQ",{auth:{lock:(e,t,r)=>r()}})},1657:function(e,t,r){"use strict";r.d(t,{cb:function(){return d},cn:function(){return i},gQ:function(){return c},uf:function(){return l},wo:function(){return u},xG:function(){return s}});var a=r(57042),n=r(74769);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function l(e){return new Intl.NumberFormat("en-US").format(e)}function o(e){return e<=0||!isFinite(e)?0:Math.round(235.214583/e*10)/10}function c(e,t){let r=o(e),a=o(t);return"".concat(r," / ").concat(a," L/100km")}function d(e){return null!=e&&"string"==typeof e&&/\.(mp4|mov|avi)(\?|$)/i.test(e)}function u(e,t){var r;if(null==e||"string"!=typeof e||!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;let a=(null!==(r=null!=t?t:"http://localhost:8000")&&void 0!==r?r:"").replace(/\/$/,"");return a?a+(e.startsWith("/")?e:"/"+e):e}},85744:function(e,t,r){"use strict";function a(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),!1===r||!a.defaultPrevented)return t?.(a)}}r.d(t,{Mj:function(){return a}}),"undefined"!=typeof window&&window.document&&window.document.createElement},42210:function(e,t,r){"use strict";r.d(t,{F:function(){return i},e:function(){return s}});var a=r(2265);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let r=!1,a=e.map(e=>{let a=n(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():n(e[t],null)}}}}function s(...e){return a.useCallback(i(...e),e)}},56989:function(e,t,r){"use strict";r.d(t,{b:function(){return s},k:function(){return i}});var a=r(2265),n=r(57437);function i(e,t){let r=a.createContext(t),i=e=>{let{children:t,...i}=e,s=a.useMemo(()=>i,Object.values(i));return(0,n.jsx)(r.Provider,{value:s,children:t})};return i.displayName=e+"Provider",[i,function(n){let i=a.useContext(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}function s(e,t=[]){let r=[],i=()=>{let t=r.map(e=>a.createContext(e));return function(r){let n=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return i.scopeName=e,[function(t,i){let s=a.createContext(i),l=r.length;r=[...r,i];let o=t=>{let{scope:r,children:i,...o}=t,c=r?.[e]?.[l]||s,d=a.useMemo(()=>o,Object.values(o));return(0,n.jsx)(c.Provider,{value:d,children:i})};return o.displayName=t+"Provider",[o,function(r,n){let o=n?.[e]?.[l]||s,c=a.useContext(o);if(c)return c;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(i,...t)]}},31033:function(e,t,r){"use strict";r.d(t,{WV:function(){return c},jH:function(){return d}});var a=r(2265),n=r(54887),i=r(42210),s=r(57437),l=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){let e,s;let l=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,o=function(e,t){let r={...t};for(let a in t){let n=e[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...e)=>{let t=i(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...i}:"className"===a&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(o.ref=t?(0,i.F)(t,l):l),a.cloneElement(r,o)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...i}=e,l=a.Children.toArray(n),c=l.find(o);if(c){let e=c.props.children,n=l.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),n=a.forwardRef((e,a)=>{let{asChild:n,...i}=e,l=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(l,{...i,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function d(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},73763:function(e,t,r){"use strict";r.d(t,{T:function(){return l}});var a,n=r(2265),i=r(51030),s=(a||(a=r.t(n,2)))[" useInsertionEffect ".trim().toString()]||i.b;function l({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){let[i,l,o]=function({defaultProp:e,onChange:t}){let[r,a]=n.useState(e),i=n.useRef(r),l=n.useRef(t);return s(()=>{l.current=t},[t]),n.useEffect(()=>{i.current!==r&&(l.current?.(r),i.current=r)},[r,i]),[r,a,l]}({defaultProp:t,onChange:r}),c=void 0!==e,d=c?e:i;{let t=n.useRef(void 0!==e);n.useEffect(()=>{let e=t.current;if(e!==c){let t=c?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=c},[c,a])}return[d,n.useCallback(t=>{if(c){let r="function"==typeof t?t(e):t;r!==e&&o.current?.(r)}else l(t)},[c,e,l,o])]}Symbol("RADIX:SYNC_STATE")},51030:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var a=r(2265),n=globalThis?.document?a.useLayoutEffect:()=>{}}},function(e){e.O(0,[7895,116,263,3226,7169,7633,555,9782,2971,4938,1744],function(){return e(e.s=2933)}),_N_E=e.O()}]);