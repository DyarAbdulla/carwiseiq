(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6130,5922],{62898:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let n=(0,i.forwardRef)(({color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:c,className:u="",children:o,...d},h)=>(0,i.createElement)("svg",{ref:h,...l,width:r,height:r,stroke:n,strokeWidth:c?24*Number(s)/Number(r):s,className:["lucide",`lucide-${a(e)}`,u].join(" "),...d},[...t.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return n.displayName=`${e}`,n}},4035:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(62898).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},62442:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(62898).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},76637:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(62898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},86264:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},96142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(62898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},12741:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(62898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},27508:function(e,t,n){Promise.resolve().then(n.bind(n,20581))},20581:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(57437),l=n(65864),a=n(40386),r=n(24033),s=n(61396),c=n.n(s),u=n(50116),o=n(96142),d=n(4035),h=n(76637),m=n(12741);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,n(62898).Z)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var p=n(62442);let g=["stepLocation","stepMedia","stepDetails","stepContact","stepReview"],v=[o.Z,d.Z,h.Z,m.Z,f];function x(e){let{children:t}=e,n=(0,r.usePathname)()||"",s=(0,u.useLocale)(),o=(0,u.useTranslations)("sell"),d=function(e){let t=e.match(/\/sell\/step(\d+)/);return t?Math.min(5,Math.max(1,parseInt(t[1],10))):1}(n),h=n.includes("/sell/success"),m=n.includes("/sell/step")&&!h,f=g.map((e,t)=>({id:t+1,path:"step".concat(t+1),label:o(e),icon:v[t]}));return(0,i.jsx)(a.i,{redirectTo:"login",children:(0,i.jsxs)(l.E,{children:[m&&(0,i.jsx)("div",{className:"sticky top-16 z-30 backdrop-blur-xl border-b border-white/10 bg-black/20",children:(0,i.jsx)("div",{className:"max-w-5xl mx-auto px-4 py-6",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 -translate-y-1/2 bg-white/5 rounded-full"}),(0,i.jsx)("div",{className:"absolute top-1/2 left-0 h-0.5 -translate-y-1/2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500 ease-out",style:{width:"".concat((d-1)/(f.length-1)*100,"%")}}),(0,i.jsx)("div",{className:"relative flex justify-between items-center",children:f.map(e=>{let t=e.id,n=d===t,l=d>t,a=e.icon,r="/".concat(s,"/sell/").concat(e.path);return(0,i.jsxs)(c(),{href:r,className:"group flex flex-col items-center gap-2 relative z-10",children:[(0,i.jsx)("div",{className:"\n                            flex items-center justify-center w-10 h-10 rounded-full\n                            transition-all duration-300 ease-out\n                            ".concat(n?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/50 scale-110":l?"bg-emerald-500/20 text-emerald-400 border-2 border-emerald-500/30":"bg-white/5 text-gray-400 border-2 border-white/10 group-hover:border-white/20 group-hover:text-gray-300","\n                          "),children:l?(0,i.jsx)(p.Z,{className:"h-5 w-5"}):(0,i.jsx)(a,{className:"h-5 w-5 ".concat(n?"text-white":"")})}),(0,i.jsx)("span",{className:"\n                            text-xs font-medium transition-colors duration-300\n                            ".concat(n?"text-white":l?"text-emerald-400":"text-gray-400 group-hover:text-gray-300","\n                            hidden sm:block max-w-[80px] text-center\n                          "),children:e.label})]},e.path)})})]})})}),(0,i.jsx)("div",{className:"form-wizard-container min-h-screen text-gray-100",children:t})]})})}},40386:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var i=n(57437),l=n(2265),a=n(24033),r=n(50116),s=n(6678),c=n(58148);function u(e){let{children:t,redirectTo:n="login"}=e,{user:u,loading:o}=(0,s.useAuthContext)(),d=(0,a.useRouter)(),h=(0,a.usePathname)(),m=(0,r.useLocale)()||"en";return((0,l.useEffect)(()=>{if(o||u)return;let e="register"===n?"/".concat(m,"/register"):"/".concat(m,"/login"),t="".concat(e,"?returnUrl=").concat(encodeURIComponent(h||"/".concat(m)));d.push(t)},[u,o,h,m,d,n]),o)?(0,i.jsx)("div",{className:"flex min-h-[calc(100vh-200px)] items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)(c.T,{size:"lg",className:"text-[#5B7FFF]"}),(0,i.jsx)("p",{className:"text-[#94a3b8]",children:"Checking authentication..."})]})}):u?(0,i.jsx)(i.Fragment,{children:t}):null}},58148:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var i=n(57437),l=n(86264),a=n(1657);let r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};function s(e){let{size:t="md",className:n,color:s="text-[#5B7FFF]"}=e;return(0,i.jsx)(l.Z,{className:(0,a.cn)("animate-spin",r[t],s,n)})}},6678:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthProvider:function(){return s},useAuthContext:function(){return c}});var i=n(57437),l=n(2265),a=n(45922);let r=(0,l.createContext)(null);function s(e){let{children:t}=e,[n,s]=(0,l.useState)(null),[c,u]=(0,l.useState)(null),[o,d]=(0,l.useState)(null),[h,m]=(0,l.useState)(!0),f=(0,l.useCallback)(async e=>{var t;let{data:n,error:i}=await a.supabase.from("users").select("role").eq("id",e).maybeSingle();return i||!n?null:null!==(t=n.role)&&void 0!==t?t:null},[]),p=(0,l.useCallback)(async()=>{try{let{data:{session:e},error:t}=await a.supabase.auth.getSession();if(t||!e){u(null),s(null),d(null);return}u(e),s(e.user),m(!1);try{let t=await f(e.user.id);d(t)}catch(e){d(null)}}catch(e){u(null),s(null),d(null)}finally{m(!1)}},[f]);(0,l.useEffect)(()=>{p();let{data:{subscription:e}}=a.supabase.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_OUT"===e||!t){u(null),s(null),d(null),m(!1);return}u(t),s(t.user);try{let e=await f(t.user.id);d(e)}finally{m(!1)}}),t=setTimeout(()=>{m(e=>!e&&e)},8e3);return()=>{clearTimeout(t),e.unsubscribe()}},[p,f]);let g=(0,l.useCallback)(async()=>{m(!0),await a.supabase.auth.signOut(),u(null),s(null),d(null),m(!1)},[]),v=(0,l.useMemo)(()=>({user:n,session:c,role:o,isAdmin:"admin"===o,loading:h,signOut:g}),[n,c,o,h,g]);return(0,i.jsx)(r.Provider,{value:v,children:t})}function c(){let e=(0,l.useContext)(r);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},65864:function(e,t,n){"use strict";n.d(t,{E:function(){return o},e:function(){return d}});var i=n(57437),l=n(2265);let a="sell_wizard_draft",r={make:"",model:"",year:"",price:"",mileage:"",transmission:"",fuel_type:"",condition:"",body_type:"",color:"",previous_owners:"",accident_history:"",features:[]},s={phone:"",whatsapp:"",whatsappSameAsPhone:!0,preferredContact:"",bestTimeToCall:[],description:""},c={location:null,media:[],uploadedMediaUrls:[],carDetails:null,contact:null,editListingId:null,publishedListingId:null},u=(0,l.createContext)(null);function o(e){let{children:t}=e,[n,o]=(0,l.useState)(()=>({...c,...function(){try{var e,t,n,i,l;let r=localStorage.getItem(a);if(!r)return{};let s=JSON.parse(r);return{location:null!==(e=s.location)&&void 0!==e?e:null,media:[],uploadedMediaUrls:[],carDetails:null!==(t=s.carDetails)&&void 0!==t?t:null,contact:null!==(n=s.contact)&&void 0!==n?n:null,editListingId:null!==(i=s.editListingId)&&void 0!==i?i:null,publishedListingId:null!==(l=s.publishedListingId)&&void 0!==l?l:null}}catch(e){return{}}}()}));(0,l.useEffect)(()=>{!function(e){try{let t={location:e.location,media:[],uploadedMediaUrls:[],carDetails:e.carDetails,contact:e.contact,editListingId:e.editListingId,publishedListingId:e.publishedListingId};localStorage.setItem(a,JSON.stringify(t))}catch(e){console.warn("SellWizard persist failed:",e)}}(n)},[n]);let d=(0,l.useCallback)(e=>{o(t=>({...t,location:e}))},[]),h=(0,l.useCallback)(e=>{o(t=>({...t,media:e,uploadedMediaUrls:[]}))},[]),m=(0,l.useCallback)(e=>{o(t=>({...t,uploadedMediaUrls:e}))},[]),f=(0,l.useCallback)(e=>{let t=["video/mp4","video/quicktime","video/x-msvideo"],n=["image/jpeg","image/jpg","image/png","image/webp"];o(i=>{let l=[...i.media],a=l.length;for(let i of e){var r,s,c;if(l.length>=10)break;let e=t.includes(i.type)||/\.(mp4|mov|avi)$/i.test(i.name),u=n.includes(i.type)||/\.(jpe?g|png|webp)$/i.test(i.name);if(!e&&!u)continue;let o=URL.createObjectURL(i);l.push({id:null!==(c=null===(r=(s=crypto).randomUUID)||void 0===r?void 0:r.call(s))&&void 0!==c?c:"m-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,9)),file:i,previewUrl:o,isVideo:e,isCover:0===l.length,order:a++})}let u=l.some(e=>e.isCover);return l.length&&!u&&(l[0].isCover=!0),{...i,media:l,uploadedMediaUrls:[]}})},[]),p=(0,l.useCallback)(e=>{o(t=>{var n;let i=t.media.filter(t=>t.id!==e);return(null===(n=t.media.find(t=>t.id===e))||void 0===n?void 0:n.isCover)&&i.length&&(i[0].isCover=!0),{...t,media:i,uploadedMediaUrls:[]}})},[]),g=(0,l.useCallback)(e=>{o(t=>({...t,media:t.media.map(t=>({...t,isCover:t.id===e})),uploadedMediaUrls:[]}))},[]),v=(0,l.useCallback)((e,t)=>{o(n=>{let i=[...n.media],[l]=i.splice(e,1);return l?(i.splice(t,0,l),{...n,media:i.map((e,t)=>({...e,order:t})),uploadedMediaUrls:[]}):n})},[]),x=(0,l.useCallback)(e=>{o(t=>({...t,carDetails:null===e?null:{...r,...t.carDetails,...e}}))},[]),b=(0,l.useCallback)(e=>{o(t=>({...t,contact:null===e?null:{...s,...t.contact,...e}}))},[]),y=(0,l.useCallback)(e=>{o(t=>({...t,editListingId:e}))},[]),w=(0,l.useCallback)(e=>{o(t=>({...t,publishedListingId:e}))},[]),k=(0,l.useCallback)(()=>{o({...c}),localStorage.removeItem(a)},[]),C=(0,l.useCallback)(e=>{o(t=>{var n,i;return{...t,location:e.location?{city:null!==(n=e.location.city)&&void 0!==n?n:"",neighborhood:null!==(i=e.location.neighborhood)&&void 0!==i?i:""}:t.location,carDetails:e.carDetails?{...r,...e.carDetails}:t.carDetails,contact:e.contact?{...s,...e.contact}:t.contact}})},[]),j=(0,l.useMemo)(()=>({...n,setLocation:d,setMedia:h,setUploadedMediaUrls:m,addMedia:f,removeMedia:p,setCover:g,reorderMedia:v,setCarDetails:x,setContact:b,setEditListingId:y,setPublishedListingId:w,clearDraft:k,loadForEdit:C}),[n,d,h,m,f,p,g,v,x,b,y,w,k,C]);return(0,i.jsx)(u.Provider,{value:j,children:t})}function d(){let e=(0,l.useContext)(u);if(!e)throw Error("useSellWizard must be used within SellWizardProvider");return e}},45922:function(e,t,n){"use strict";n.d(t,{supabase:function(){return i}});let i=(0,n(33226).eI)("https://fehkzrrahgyesxzrwlme.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZlaGt6cnJhaGd5ZXN4enJ3bG1lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxNzcwNjEsImV4cCI6MjA4NDc1MzA2MX0.AI8QaX8nOP8UwcfmgbGN2EN4jmK94i98Kpd3ZtPDZRQ",{auth:{lock:(e,t,n)=>n()}})},1657:function(e,t,n){"use strict";n.d(t,{cb:function(){return o},cn:function(){return a},gQ:function(){return u},uf:function(){return s},wo:function(){return d},xG:function(){return r}});var i=n(57042),l=n(74769);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.m6)((0,i.W)(t))}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function s(e){return new Intl.NumberFormat("en-US").format(e)}function c(e){return e<=0||!isFinite(e)?0:Math.round(235.214583/e*10)/10}function u(e,t){let n=c(e),i=c(t);return"".concat(n," / ").concat(i," L/100km")}function o(e){return null!=e&&"string"==typeof e&&/\.(mp4|mov|avi)(\?|$)/i.test(e)}function d(e,t){var n;if(null==e||"string"!=typeof e||!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;let i=(null!==(n=null!=t?t:"http://localhost:8000")&&void 0!==n?n:"").replace(/\/$/,"");return i?i+(e.startsWith("/")?e:"/"+e):e}}},function(e){e.O(0,[7895,116,263,3226,1396,2971,4938,1744],function(){return e(e.s=27508)}),_N_E=e.O()}]);