(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9200],{72104:function(e,t,a){Promise.resolve().then(a.bind(a,56708))},56708:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var s=a(57437),r=a(2265),i=a(24033),l=a(50116),n=a(61396),d=a.n(n),o=a(63572),c=a(45922),m=a(57245),u=a(35498),x=a(27815),h=a(85754),g=a(45179),p=a(49842),f=a(31478),b=a(42706),v=a(45509),w=a(54900),j=a(25703),y=a(58148),N=a(1657),k=a(9883),C=a(29251),_=a(20173),S=a(41298),F=a(99670),z=a(28203),Z=a(96142),E=a(53905),L=a(86264),R=a(82104),T=a(45367),A=a(98777);function B(e){try{return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch(t){return e}}let D=["automatic","manual"],M=["petrol","diesel","electric","hybrid"],V=["excellent","good","fair"];function I(){let e=(0,l.useLocale)()||"en",t=(0,i.useRouter)(),a=(0,i.useSearchParams)(),{toast:n}=(0,j.useToast)(),{user:I,sessionLoaded:Y}=(0,m._)(),[O,U]=(0,r.useState)([]),P=(0,r.useRef)(null),$=(0,r.useRef)(null),[q,H]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null);(0,r.useEffect)(()=>{(null==a?void 0:a.get("success"))==="listing-created"&&t.replace("/".concat(e,"/my-listings"),{scroll:!1})},[a,e,t]);let[X,G]=(0,r.useState)(!0),[J,W]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[ea,es]=(0,r.useState)(!1),[er,ei]=(0,r.useState)(!1),[el,en]=(0,r.useState)(null),[ed,eo]=(0,r.useState)(null),[ec,em]=(0,r.useState)({title:"",make:"",model:"",year:"",price:"",mileage:"",transmission:"",fuel_type:"",condition:"",location:"",description:"",imagesText:"",is_sold:!1}),eu=(0,r.useCallback)(async()=>{if(G(!0),W(null),!I){G(!1);return}$.current&&$.current.abort();let e=new AbortController;$.current=e;try{let t=await o.apiClient.getMyListings();if(e.signal.aborted)return;let a=(null==t?void 0:t.listings)||[];U(a),W(null)}catch(i){var t,a,s;if("AbortError"===i.name||e.signal.aborted)return;let r=(null===(a=i.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||i.message||"Failed to load listings";W(r),U([]),(null===(s=i.response)||void 0===s?void 0:s.status)===401?n({title:"Session Expired",description:"Your session has expired. Please login again.",variant:"destructive"}):n({title:"Error",description:r,variant:"destructive"})}finally{e.signal.aborted,G(!1)}},[I,n]);(0,r.useEffect)(()=>{if(!Y){G(!0);return}if(!I){G(!1),t.replace("/".concat(e,"/login"));return}return eu(),()=>{$.current&&$.current.abort()}},[Y,I,t,e,eu]);let ex=(0,r.useCallback)(e=>{var t;if(!(null==I?void 0:I.id)||String(e.user_id||"")!==String((null==I?void 0:I.id)||"")||P.current===String(e.id))return;P.current=String(e.id),et(e);let a=e.images,s=Array.isArray(a)?a:[];em({title:e.title,make:e.make,model:e.model,year:String(e.year),price:String(e.price),mileage:String(e.mileage),transmission:e.transmission,fuel_type:e.fuel_type,condition:e.condition,location:e.location,description:null!==(t=e.description)&&void 0!==t?t:"",imagesText:s.filter(e=>"string"==typeof e).join("\n"),is_sold:e.is_sold}),es(!0)},[null==I?void 0:I.id]),eh=(0,r.useCallback)(()=>{es(!1),et(null),P.current=null;let a="/".concat(e,"/my-listings");t.replace(a,{scroll:!1})},[t,e]),eg=(0,r.useCallback)(async e=>{try{if(/^\d+$/.test(String(e||"").trim())){let t=parseInt(e,10),a=await o.apiClient.getListing(t);if(!a)return null;return{...a,fromSupabase:!1}}{let{data:t,error:a}=await c.supabase.from("car_listings").select("*").eq("id",String(e).trim()).single();if(a||!t)return null;return{...function(e){let t=e.images||[],a=t.map(e=>{var t;return"string"==typeof e?{url:e}:{url:null!==(t=null==e?void 0:e.url)&&void 0!==t?t:e}}),s=t[0],r="string"==typeof s?s:null==s?void 0:s.url,i=String(e.location||"").split(",").map(e=>e.trim()).filter(Boolean),l=i[i.length-1]||"",n=i.length>2?i[1]:"",d=i[0]||"",o=String(e.condition||""),c=o?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"";return{...e,images:a,cover_image:r,location_city:d,location_state:n,location_country:l,location:e.location,mileage_unit:"km",color:e.color||"",features:Array.isArray(e.features)?e.features:[],phone:e.phone||void 0,phone_country_code:e.phone_country_code||void 0,whatsapp:e.whatsapp||void 0,vin:e.vin||void 0,trim:e.trim||"",condition:c}}(t),fromSupabase:!0}}}catch(e){return null}},[]);(0,r.useEffect)(()=>{let s=null==a?void 0:a.get("edit");if(!s){P.current=null;return}if(P.current===s||!Y)return;if(!(null==I?void 0:I.id)){t.replace("/".concat(e,"/my-listings"),{scroll:!1});return}P.current=s;let r=String(I.id),i=O.find(e=>String(e.id)===String(s));if(i){if(String(i.user_id||"")===r){ex(i),t.replace("/".concat(e,"/my-listings"),{scroll:!1});return}n({title:"Error",description:"You can only edit your own listings.",variant:"destructive"}),t.replace("/".concat(e,"/my-listings"),{scroll:!1}),P.current=null;return}(async()=>{try{let a=await eg(s);if(!a){n({title:"Error",description:"Listing not found.",variant:"destructive"}),t.replace("/".concat(e,"/my-listings"),{scroll:!1}),P.current=null;return}if(String(a.user_id||"")!==r){n({title:"Error",description:"You can only edit your own listings.",variant:"destructive"}),t.replace("/".concat(e,"/my-listings"),{scroll:!1}),P.current=null;return}ex(a),t.replace("/".concat(e,"/my-listings"),{scroll:!1})}catch(a){n({title:"Error",description:a.message||"Failed to load listing.",variant:"destructive"}),t.replace("/".concat(e,"/my-listings"),{scroll:!1}),P.current=null}})()},[Y,I,O,a,e,t,ex,n,eg]);let ep=async e=>{if(e.preventDefault(),ee&&I&&String(ee.user_id)===String(I.id)){ei(!0);try{let e=ec.imagesText.trim(),t=e?e.split(/\n/).map(e=>e.trim()).filter(Boolean):[],a={title:ec.title.trim()||ee.title,make:ec.make.trim()||ee.make,model:ec.model.trim()||ee.model,year:ec.year?parseInt(ec.year,10):ee.year,price:ec.price?parseFloat(ec.price):ee.price,mileage:ec.mileage?parseInt(ec.mileage,10):ee.mileage,transmission:ec.transmission||ee.transmission,fuel_type:ec.fuel_type||ee.fuel_type,condition:ec.condition||ee.condition,location:ec.location.trim()||ee.location,description:ec.description.trim()||null,images:t,is_sold:ec.is_sold};await o.apiClient.updateDraftListing(Number(ee.id),a);let s=a.title||"".concat(a.make," ").concat(a.model," ").concat(a.year);u.activityHelpers.logListingEdited(String(ee.id),s),n({title:"Success",description:"Listing updated!"}),eh(),await eu()}catch(e){n({title:"Error",description:e instanceof Error?e.message:"Failed to update listing",variant:"destructive"})}finally{ei(!1)}}},ef=async e=>{if(!I||String(e.user_id)!==String(I.id)){n({title:"Error",description:"You can only manage your own listings.",variant:"destructive"});return}en(e.id);try{await o.apiClient.updateDraftListing(Number(e.id),{is_sold:!e.is_sold});let t=e.title||"".concat(e.year," ").concat(e.make," ").concat(e.model);e.is_sold?u.activityHelpers.logEditListing(String(e.id),t):u.activityHelpers.logMarkSold(String(e.id),t),eo(null),await eu(),n({title:"Success",description:e.is_sold?"Listing marked as active":"Car marked as sold!"})}catch(e){console.error("[MyListings] Error toggling sold status:",e),n({title:"Error",description:e instanceof Error?e.message:"Failed to update",variant:"destructive"})}finally{en(null)}};if(!Y)return(0,s.jsx)("div",{className:"container px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl flex flex-col items-center justify-center min-h-[280px] gap-4",children:[(0,s.jsx)(y.T,{size:"lg",className:"text-[#5B7FFF]"}),(0,s.jsx)("p",{className:"text-[#94a3b8]",children:"Checking authentication…"})]})});if(!I)return(0,s.jsx)("div",{className:"container px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl flex flex-col items-center justify-center min-h-[280px] gap-4",children:(0,s.jsx)("p",{className:"text-[#94a3b8]",children:"Redirecting to login…"})})});if(X)return(0,s.jsx)("div",{className:"container px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl flex flex-col items-center justify-center min-h-[280px] gap-4",children:[(0,s.jsx)(y.T,{size:"lg",className:"text-[#5B7FFF]"}),(0,s.jsx)("p",{className:"text-[#94a3b8]",children:"Loading your listings…"})]})});if(J)return(0,s.jsx)("div",{className:"container px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl",children:(0,s.jsx)(x.Zb,{className:"border-red-500/30 bg-red-500/5",children:(0,s.jsxs)(x.aY,{className:"py-8 text-center",children:[(0,s.jsx)("p",{className:"text-red-400 mb-4",children:J}),(0,s.jsx)(h.z,{variant:"outline",className:"border-[#2a2d3a] text-white",onClick:()=>eu(),children:"Retry"})]})})})});let eb=async e=>{Q(e);try{await o.apiClient.deleteListing(Number(e)),n({title:"Success",description:"Listing deleted successfully"}),await eu(),H(null)}catch(e){n({title:"Error",description:e instanceof Error?e.message:"Failed to delete listing",variant:"destructive"})}finally{Q(null)}},ev=O.filter(e=>!e.is_sold).length,ew=O.filter(e=>e.is_sold).length,ej=O.reduce((e,t)=>e+(t.views||0),0);return(0,s.jsxs)("div",{className:"relative min-h-screen",children:[(0,s.jsx)("div",{className:"absolute inset-0 -z-10 overflow-hidden pointer-events-none",children:(0,s.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-gradient-radial from-indigo-500/15 via-purple-500/10 to-transparent blur-3xl"})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"My Listings"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"Manage your car listings and track performance"})]}),(0,s.jsxs)(h.z,{onClick:()=>t.push("/".concat(e,"/sell/step1")),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white shadow-lg shadow-indigo-500/30 h-11 px-6",children:[(0,s.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Create New Listing"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"backdrop-blur-md bg-white/80 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-6 hover:bg-slate-100 dark:hover:bg-white/10 transition-all duration-200 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10",children:(0,s.jsx)(C.Z,{className:"h-5 w-5 text-slate-700 dark:text-white"})})}),(0,s.jsx)("p",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:O.length}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"Total Listings"})]}),(0,s.jsxs)("div",{className:"backdrop-blur-md bg-white/80 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-6 hover:bg-slate-100 dark:hover:bg-white/10 transition-all duration-200 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500/20 border border-emerald-500/30",children:(0,s.jsx)(_.Z,{className:"h-5 w-5 text-emerald-400"})})}),(0,s.jsx)("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-1",children:ev}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"Active"})]}),(0,s.jsxs)("div",{className:"backdrop-blur-md bg-white/80 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-6 hover:bg-slate-100 dark:hover:bg-white/10 transition-all duration-200 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"p-2 rounded-lg bg-indigo-500/20 border border-indigo-500/30",children:(0,s.jsx)(S.Z,{className:"h-5 w-5 text-indigo-400"})})}),(0,s.jsx)("p",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:ew}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"Sold"})]}),(0,s.jsxs)("div",{className:"backdrop-blur-md bg-white/80 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-6 hover:bg-slate-100 dark:hover:bg-white/10 transition-all duration-200 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:(0,s.jsx)(F.Z,{className:"h-5 w-5 text-purple-400"})})}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:ej.toLocaleString()}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"Total Views"})]})]}),0===O.length?(0,s.jsxs)("div",{className:"backdrop-blur-md bg-white/80 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-12 md:p-16 text-center shadow-sm",children:[(0,s.jsx)("div",{className:"mx-auto w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border border-slate-200 dark:border-white/10 flex items-center justify-center mb-6",children:(0,s.jsx)(C.Z,{className:"h-12 w-12 text-indigo-400"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"You don't have any listings yet"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Start selling your car by creating your first listing. It only takes a few minutes!"}),(0,s.jsxs)(h.z,{onClick:()=>t.push("/".concat(e,"/sell/step1")),className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600 hover:from-indigo-500 hover:via-purple-500 hover:to-indigo-500 text-white shadow-lg shadow-indigo-500/30 h-12 px-8 text-base font-semibold",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 mr-2"}),"Create Your First Listing"]})]}):(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:O.map((a,r)=>(0,s.jsx)(A.E.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.04*r},children:(0,s.jsxs)("div",{className:"group relative backdrop-blur-sm bg-white/80 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] hover:shadow-xl hover:shadow-indigo-500/10 hover:border-slate-300 dark:hover:border-white/20 shadow-sm",children:[(0,s.jsxs)("div",{className:"relative h-48 bg-gray-900/50 overflow-hidden",children:[(()=>{let e=function(e){if(!e||!Array.isArray(e))return null;let t=e[0];return"string"==typeof t?t:t&&"string"==typeof t.url?t.url:null}(a.images),t=e?(0,N.wo)(e):null;return t?(0,N.cb)(e)?(0,s.jsx)("video",{src:t,muted:!0,playsInline:!0,loop:!0,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,s.jsx)("img",{src:t,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:e=>{e.target.src="/images/cars/default-car.jpg",e.target.onerror=null}}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gradient-to-br from-gray-800 to-gray-900",children:(0,s.jsx)(C.Z,{className:"h-12 w-12 opacity-50"})})})(),(0,s.jsx)("div",{className:"absolute top-3 right-3",children:a.is_sold?(0,s.jsx)(f.C,{className:"bg-blue-500/80 backdrop-blur-md text-white border-blue-400/50 shadow-lg",children:"SOLD"}):(0,s.jsx)(f.C,{className:"bg-emerald-500/80 backdrop-blur-md text-white border-emerald-400/50 shadow-lg",children:"Active"})})]}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2 line-clamp-1",children:a.title||"".concat(a.make," ").concat(a.model," ").concat(a.year)}),(0,s.jsx)("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mb-3",children:(0,N.xG)(a.price)}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-gray-400",children:[(0,s.jsx)(z.Z,{className:"h-4 w-4"}),B(a.created_at)]}),a.location&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-gray-400",children:[(0,s.jsx)(Z.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"truncate",children:a.location})]}),a.is_sold&&a.sold_at&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-400",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4"}),"Sold on ",B(a.sold_at)]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-200 dark:border-white/10 space-y-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(h.z,{variant:"outline",size:"sm",className:"flex-1 border-slate-200 dark:border-white/10 bg-white dark:bg-white/5 hover:bg-slate-100 dark:hover:bg-white/10 text-slate-900 dark:text-white backdrop-blur-sm",onClick:()=>{ex(a),t.push("/".concat(e,"/my-listings?edit=").concat(a.id),{scroll:!1})},children:[(0,s.jsx)(E.Z,{className:"h-4 w-4 mr-1.5"}),"Edit"]}),(0,s.jsxs)(h.z,{variant:"outline",size:"sm",className:"flex-1 backdrop-blur-sm ".concat(a.is_sold?"border-emerald-500/30 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400":"border-indigo-500/30 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-400"),onClick:()=>eo(a),disabled:!!el,children:[el===a.id?(0,s.jsx)(L.Z,{className:"h-4 w-4 mr-1.5 animate-spin"}):a.is_sold?(0,s.jsx)(R.Z,{className:"h-4 w-4 mr-1.5"}):(0,s.jsx)(_.Z,{className:"h-4 w-4 mr-1.5"}),a.is_sold?"Available":"Sold"]}),(0,s.jsx)(h.z,{variant:"outline",size:"sm",className:"border-red-500/30 bg-red-500/10 hover:bg-red-500/20 text-red-400 backdrop-blur-sm",onClick:()=>H(String(a.id)),disabled:!!K,children:K===String(a.id)?(0,s.jsx)(L.Z,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(T.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)(d(),{href:"/".concat(e,"/buy-sell/").concat(a.id),className:"block w-full text-center text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"View listing →"})]})]})]})},a.id))})]}),(0,s.jsx)(b.Vq,{open:null!==q,onOpenChange:e=>!e&&H(null),children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsxs)(b.fK,{children:[(0,s.jsx)(b.$N,{children:"Delete Listing"}),(0,s.jsx)(b.Be,{children:"Are you sure you want to delete this listing? This action cannot be undone."})]}),(0,s.jsxs)(b.cN,{className:"gap-2",children:[(0,s.jsx)(h.z,{variant:"outline",onClick:()=>H(null),className:"border-slate-200 dark:border-white/10 text-slate-700 dark:text-gray-300",children:"Cancel"}),(0,s.jsxs)(h.z,{variant:"destructive",onClick:()=>q&&eb(q),disabled:!!K,className:"bg-red-600 hover:bg-red-500",children:[K?(0,s.jsx)(L.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}),(0,s.jsx)(b.Vq,{open:ea,onOpenChange:e=>!e&&eh(),children:(0,s.jsxs)(b.cZ,{className:"max-w-3xl w-[95vw] max-h-[85vh] flex flex-col p-0",children:[(0,s.jsx)(b.fK,{className:"sticky top-0 z-10 px-6 pt-6 pb-4 border-b border-slate-200 dark:border-white/10 bg-white/95 dark:bg-[#0f1117]/95 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(b.$N,{className:"text-xl font-semibold mb-1",children:"Edit Listing"}),(0,s.jsx)(b.Be,{className:"text-sm",children:"Update your listing details. Make, model, and year are read-only."})]})})}),(0,s.jsx)("form",{id:"edit-form",onSubmit:ep,className:"flex-1 overflow-y-auto px-6 py-6 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar-thumb]:bg-white/10 [&::-webkit-scrollbar-thumb]:rounded-full hover:[&::-webkit-scrollbar-thumb]:bg-white/20",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-title",className:"text-sm font-medium",children:"Title"}),(0,s.jsx)(g.I,{id:"edit-title",value:ec.title,onChange:e=>em(t=>({...t,title:e.target.value})),className:"h-11 rounded-xl",placeholder:"e.g. Toyota Camry 2020"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-price",className:"text-sm font-medium",children:"Price (USD) *"}),(0,s.jsx)(g.I,{id:"edit-price",type:"number",min:0,value:ec.price,onChange:e=>em(t=>({...t,price:e.target.value})),className:"h-11 rounded-xl"})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-make",className:"text-sm font-medium",children:"Make"}),(0,s.jsx)(g.I,{id:"edit-make",value:ec.make,disabled:!0,className:"h-11 rounded-xl cursor-not-allowed",readOnly:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-model",className:"text-sm font-medium",children:"Model"}),(0,s.jsx)(g.I,{id:"edit-model",value:ec.model,disabled:!0,className:"h-11 rounded-xl cursor-not-allowed",readOnly:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-year",className:"text-sm font-medium",children:"Year"}),(0,s.jsx)(g.I,{id:"edit-year",type:"number",value:ec.year,disabled:!0,className:"h-11 rounded-xl cursor-not-allowed",readOnly:!0})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-mileage",className:"text-sm font-medium",children:"Mileage (km) *"}),(0,s.jsx)(g.I,{id:"edit-mileage",type:"number",min:0,value:ec.mileage,onChange:e=>em(t=>({...t,mileage:e.target.value})),className:"h-11 rounded-xl"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{className:"text-sm font-medium",children:"Transmission *"}),(0,s.jsxs)(v.Ph,{value:ec.transmission||void 0,onValueChange:e=>em(t=>({...t,transmission:e})),children:[(0,s.jsx)(v.i4,{className:"h-11 rounded-xl",children:(0,s.jsx)(v.ki,{placeholder:"Select transmission"})}),(0,s.jsx)(v.Bw,{children:D.map(e=>(0,s.jsx)(v.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{className:"text-sm font-medium",children:"Fuel Type *"}),(0,s.jsxs)(v.Ph,{value:ec.fuel_type||void 0,onValueChange:e=>em(t=>({...t,fuel_type:e})),children:[(0,s.jsx)(v.i4,{className:"h-11 rounded-xl",children:(0,s.jsx)(v.ki,{placeholder:"Select fuel type"})}),(0,s.jsx)(v.Bw,{children:M.map(e=>(0,s.jsx)(v.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{className:"text-sm font-medium",children:"Condition *"}),(0,s.jsxs)(v.Ph,{value:ec.condition||void 0,onValueChange:e=>em(t=>({...t,condition:e})),children:[(0,s.jsx)(v.i4,{className:"h-11 rounded-xl",children:(0,s.jsx)(v.ki,{placeholder:"Select condition"})}),(0,s.jsx)(v.Bw,{className:"bg-[#1a1d29] border-white/10",children:V.map(e=>(0,s.jsx)(v.Ql,{value:e,className:"text-white focus:bg-white/10",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-location",className:"text-sm font-medium text-gray-300",children:"Location"}),(0,s.jsx)(g.I,{id:"edit-location",value:ec.location,onChange:e=>em(t=>({...t,location:e.target.value})),className:"h-11 rounded-xl border-white/10 bg-white/5 text-white placeholder:text-gray-500 focus-visible:ring-2 focus-visible:ring-indigo-500/50",placeholder:"City, Country"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-description",className:"text-sm font-medium text-gray-300",children:"Description"}),(0,s.jsx)("textarea",{id:"edit-description",rows:5,value:ec.description,onChange:e=>em(t=>({...t,description:e.target.value})),className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 resize-none",placeholder:"Describe your car, its condition, features, maintenance history, etc."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{htmlFor:"edit-images",className:"text-sm font-medium text-gray-300",children:"Image URLs"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Enter one URL per line"}),(0,s.jsx)("textarea",{id:"edit-images",rows:4,value:ec.imagesText,onChange:e=>em(t=>({...t,imagesText:e.target.value})),className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-xs font-mono text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 resize-none",placeholder:"https://example.com/image1.jpg"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p._,{className:"text-sm font-medium text-gray-300",children:"Status"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl border border-white/10 bg-white/5",children:[(0,s.jsx)(w.X,{id:"edit-is_sold",checked:ec.is_sold,onCheckedChange:e=>em(t=>({...t,is_sold:!!e})),className:"border-white/20 data-[state=checked]:bg-indigo-600"}),(0,s.jsx)(p._,{htmlFor:"edit-is_sold",className:"cursor-pointer text-sm text-gray-300 font-normal",children:"Mark this listing as sold"})]})]})]})}),(0,s.jsx)(b.cN,{className:"sticky bottom-0 z-10 px-6 py-4 border-t border-white/10 bg-[#0f1117]/95 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex gap-3 w-full sm:w-auto sm:ml-auto",children:[(0,s.jsx)(h.z,{type:"button",variant:"outline",className:"flex-1 sm:flex-none border-white/10 text-gray-300 hover:bg-white/5 hover:text-white h-11 px-6",onClick:eh,disabled:er,children:"Cancel"}),(0,s.jsx)(h.z,{type:"submit",form:"edit-form",className:"flex-1 sm:flex-none bg-indigo-600 hover:bg-indigo-500 text-white h-11 px-6 font-medium shadow-lg shadow-indigo-500/20",disabled:er,children:er?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving…"]}):"Save Changes"})]})})]})}),(0,s.jsx)(b.Vq,{open:!!ed,onOpenChange:e=>!e&&eo(null),children:(0,s.jsxs)(b.cZ,{className:"max-w-md",children:[(0,s.jsxs)(b.fK,{children:[(0,s.jsx)(b.$N,{children:(null==ed?void 0:ed.is_sold)?"Mark as Available":"Mark as Sold"}),(0,s.jsx)(b.Be,{children:(null==ed?void 0:ed.is_sold)?"Mark YOUR car as available again? The sold badge will be removed.":"Mark YOUR car as sold? The listing will remain visible but shown as sold to all users."})]}),(0,s.jsxs)(b.cN,{className:"gap-2 sm:gap-0",children:[(0,s.jsx)(h.z,{type:"button",variant:"outline",className:"border-[#2a2d3a] text-white",onClick:()=>eo(null),disabled:!!el,children:"Cancel"}),(0,s.jsx)(h.z,{type:"button",className:(null==ed?void 0:ed.is_sold)?"bg-green-600 hover:bg-green-700":"bg-amber-600 hover:bg-amber-700",onClick:()=>ed&&ef(ed),disabled:!!el,children:el&&ed?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating…"]}):(null==ed?void 0:ed.is_sold)?"Mark as Available":"Mark as Sold"})]})]})})]})}function Y(){return(0,s.jsx)(I,{})}},58148:function(e,t,a){"use strict";a.d(t,{T:function(){return n}});var s=a(57437),r=a(86264),i=a(1657);let l={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};function n(e){let{size:t="md",className:a,color:n="text-[#5B7FFF]"}=e;return(0,s.jsx)(r.Z,{className:(0,i.cn)("animate-spin",l[t],n,a)})}},27815:function(e,t,a){"use strict";a.d(t,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},ll:function(){return d}});var s=a(57437),r=a(2265),i=a(1657);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] text-slate-900 dark:text-white shadow-sm",a),...r})});l.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-slate-600 dark:text-[#94a3b8]",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},54900:function(e,t,a){"use strict";a.d(t,{X:function(){return d}});var s=a(57437),r=a(2265),i=a(66062),l=a(1657),n=a(62442);let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-[#2a2d3a] bg-[#0f1117] ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#5B7FFF] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-[#5B7FFF] data-[state=checked]:text-white data-[state=checked]:border-[#5B7FFF]",a),...r,children:(0,s.jsx)(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})})});d.displayName=i.fC.displayName},42706:function(e,t,a){"use strict";a.d(t,{$N:function(){return g},Be:function(){return p},Vq:function(){return d},cN:function(){return h},cZ:function(){return u},fK:function(){return x},hg:function(){return o}});var s=a(57437),r=a(2265),i=a(79515),l=a(82549),n=a(1657);let d=i.fC,o=i.xz,c=i.h_;i.x8;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-[1100] bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=i.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(i.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-[1100] grid w-full max-w-lg max-h-[90vh] overflow-y-auto overscroll-contain translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 text-slate-600 dark:text-[#94a3b8]"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...r})});g.displayName=i.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.dk,{ref:t,className:(0,n.cn)("text-sm text-slate-600 dark:text-[#94a3b8]",a),...r})});p.displayName=i.dk.displayName},45179:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(57437),r=a(2265),i=a(1657);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex w-full rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-white/[0.03] backdrop-blur-sm px-4 py-3 min-h-[48px] text-base text-start text-slate-900 dark:text-white/90 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-400 dark:placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/30 focus-visible:ring-offset-2 focus-visible:border-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-300 hover:border-indigo-500/50 dark:hover:border-indigo-500/50 hover:bg-slate-50 dark:hover:bg-white/[0.05] touch-manipulation",a),ref:t,...l})});l.displayName="Input"},49842:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var s=a(57437),r=a(2265),i=a(1657);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("label",{ref:t,className:(0,i.cn)("text-sm font-medium leading-none text-white peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});l.displayName="Label"},45509:function(e,t,a){"use strict";a.d(t,{Bw:function(){return x},Ph:function(){return c},Ql:function(){return h},i4:function(){return m},ki:function(){return u}});var s=a(57437),r=a(2265),i=a(58527),l=a(1657),n=a(83523),d=a(62442);let o=r.createContext(void 0),c=e=>{let{value:t,onValueChange:a,disabled:r,children:l,id:n,name:d}=e;return(0,s.jsx)(o.Provider,{value:{value:t,onValueChange:a,id:n},children:(0,s.jsx)(i.fC,{value:t,onValueChange:a,disabled:r,name:d,children:l})})};c.displayName="Select";let m=r.forwardRef((e,t)=>{let{className:a,children:d,...c}=e,m=r.useContext(o);return(0,s.jsxs)(i.xz,{ref:t,id:null==m?void 0:m.id,className:(0,l.cn)("flex min-h-[44px] w-full items-center justify-between rounded-lg border border-slate-200/80 dark:border-white/10 bg-slate-50/90 dark:bg-white/[0.05] backdrop-blur-sm px-4 py-3 text-base text-slate-900 dark:text-slate-100 ring-offset-2 ring-offset-white dark:ring-offset-slate-950 placeholder:text-slate-500 dark:placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:focus:border-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-all duration-200 hover:border-slate-300 dark:hover:border-white/20 hover:bg-slate-100/80 dark:hover:bg-white/[0.08]",a),...c,children:[d,(0,s.jsx)(i.JO,{asChild:!0,children:(0,s.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=i.xz.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.B4,{ref:t,className:(0,l.cn)("block truncate",a),...r})});u.displayName=i.B4.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(i.h_,{children:(0,s.jsx)(i.VY,{ref:t,className:(0,l.cn)("relative z-[1200] min-w-[8rem] overflow-hidden rounded-card border border-slate-200/80 dark:border-white/10 bg-white/98 dark:bg-slate-900/98 backdrop-blur-xl text-slate-900 dark:text-slate-100 shadow-glass","max-h-[60vh]","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-md:!transform-none max-md:!fixed max-md:!left-0 max-md:!right-0 max-md:!bottom-0 max-md:!top-auto max-md:!w-full max-md:!min-w-0 max-md:!h-[60vh] max-md:!max-h-[60vh] max-md:!rounded-t-2xl max-md:!rounded-b-none max-md:pb-[env(safe-area-inset-bottom)] max-md:data-[state=open]:slide-in-from-bottom max-md:border-t",a),...n,position:"item-aligned",children:(0,s.jsx)(i.l_,{className:(0,l.cn)("p-1 overflow-y-auto overscroll-contain max-h-[60vh]","max-md:!w-full max-md:min-w-0 max-md:!max-h-[60vh] max-md:overflow-y-auto"),children:r})})})});x.displayName=i.VY.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(i.ck,{ref:t,className:(0,l.cn)("relative flex w-full cursor-pointer select-none items-center rounded-lg py-3 md:py-2.5 pl-8 pr-3 text-sm min-h-[44px] md:min-h-0 outline-none focus:bg-slate-100 dark:focus:bg-white/10 focus:text-slate-900 dark:focus:text-slate-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [touch-action:manipulation]",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.wU,{children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(i.eT,{children:r})]})});h.displayName=i.ck.displayName}},function(e){e.O(0,[7895,116,263,4829,6376,3226,7169,7633,1396,8777,555,9782,8385,3572,6478,2971,4938,1744],function(){return e(e.s=72104)}),_N_E=e.O()}]);