(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9950,5922],{16399:function(e,t,a){Promise.resolve().then(a.bind(a,24556))},24556:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var s=a(57437),r=a(2265),l=a(24033),i=a(50116),n=a(85754),c=a(45179),d=a(49842),o=a(42706),x=a(86443),h=a(5589),u=a(77216),m=a(99670),p=a(35817),b=a(49036),g=a(70612),f=a(38244),w=a(21271),v=a(45367),j=a(31478),k=a(25703),N=a(6678),y=a(45922),C=a(48132),F=a(7019),_=a(4035),S=a(82549),B=a(86264),P=a(62442);function D(e){let{userId:t,currentAvatarUrl:a,fallbackLetter:l,onAvatarChange:i}=e,c=(0,r.useRef)(null),{toast:d}=(0,k.useToast)(),[x,h]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),w="profile_avatar_".concat(t),v=()=>{var e;null===(e=c.current)||void 0===e||e.click()},j=async e=>{var t;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())){d({title:"Invalid format",description:"Please use JPG, JPEG, PNG, or WebP.",variant:"destructive"});return}if(e.size>5242880){d({title:"File too large",description:"Maximum size is 5MB.",variant:"destructive"});return}try{let t=await new Promise((t,a)=>{let s=new Image,r=URL.createObjectURL(e);s.onload=()=>{URL.revokeObjectURL(r);let e=document.createElement("canvas");e.width=200,e.height=200;let l=e.getContext("2d");if(!l){a(Error("Canvas not supported"));return}let i=Math.min(s.width,s.height),n=(s.width-i)/2,c=(s.height-i)/2;l.drawImage(s,n,c,i,i,0,0,200,200),e.toBlob(e=>e?t(e):a(Error("Failed to create blob")),"image/jpeg",.9)},s.onerror=()=>{URL.revokeObjectURL(r),a(Error("Failed to load image"))},s.src=r}),a=URL.createObjectURL(t);b(a),f(t),m(!0)}catch(e){d({title:"Error",description:e instanceof Error?e.message:"Failed to process image",variant:"destructive"})}},N=async()=>{if(g){h(!0);try{let a=null;try{if(null===y.supabase||void 0===y.supabase?void 0:y.supabase.storage){let s="".concat(t,"-").concat(Date.now(),".jpg"),{error:r}=await y.supabase.storage.from("avatars").upload(s,g,{contentType:"image/jpeg",upsert:!0});if(!r){var e;let{data:t}=y.supabase.storage.from("avatars").getPublicUrl(s);a=null!==(e=null==t?void 0:t.publicUrl)&&void 0!==e?e:null}}}catch(e){}a||(a=await new Promise((e,t)=>{let a=new FileReader;a.onload=()=>{let s=a.result;"string"==typeof s?e(s):t(Error("Failed to read image as data URL"))},a.onerror=()=>t(a.error||Error("FileReader failed")),a.readAsDataURL(g)}));let s=a.startsWith("data:");if(a)try{localStorage.setItem(w,a)}catch(e){}if(!s&&a)try{await y.supabase.auth.updateUser({data:{avatar_url:a}})}catch(e){}i(a),m(!1),b(null),f(null),p&&p.startsWith("blob:")&&URL.revokeObjectURL(p),d({title:"Profile picture updated successfully",description:"Your avatar has been saved."})}catch(e){d({title:"Failed to update profile picture",description:e instanceof Error?e.message:"Please try again.",variant:"destructive"})}finally{h(!1)}}},C=()=>{m(!1),p&&URL.revokeObjectURL(p),b(null),f(null)},F=a||localStorage.getItem(w);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",className:"hidden",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];e.target.value="",a&&j(a)}}),(0,s.jsxs)("div",{className:"relative group",onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{var t,a;e.preventDefault();let s=null===(a=e.dataTransfer)||void 0===a?void 0:null===(t=a.files)||void 0===t?void 0:t[0];s&&j(s)},children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg shadow-indigo-500/50 ring-4 ring-indigo-500/20",children:F?(0,s.jsx)("img",{src:F,alt:"Profile",className:"w-full h-full object-cover"}):l}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full bg-indigo-500/30 blur-xl -z-10 animate-pulse"}),(0,s.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),v()},className:"absolute bottom-0 right-0 w-8 h-8 rounded-full bg-white/80 dark:bg-white/10 backdrop-blur-md border border-slate-200 dark:border-white/20 flex items-center justify-center hover:bg-slate-100 dark:hover:bg-white/20 transition-all focus:outline-none focus:ring-2 focus:ring-[#8B5CF6] focus:ring-offset-2 focus:ring-offset-slate-900 cursor-pointer","aria-label":"Change profile picture",children:(0,s.jsx)(_.Z,{className:"h-4 w-4 text-slate-700 dark:text-white"})})]}),(0,s.jsx)(o.Vq,{open:u,onOpenChange:e=>!e&&C(),children:(0,s.jsxs)(o.cZ,{className:"sm:max-w-md",children:[(0,s.jsx)(o.fK,{children:(0,s.jsx)(o.$N,{children:"Preview profile picture"})}),(0,s.jsx)("div",{className:"flex justify-center py-4",children:p&&(0,s.jsx)("img",{src:p,alt:"Preview",className:"w-40 h-40 rounded-full object-cover border-2 border-slate-200 dark:border-white/20"})}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-[#94a3b8] text-center",children:"Image will be saved as 200\xd7200px. Save or cancel."}),(0,s.jsxs)(o.cN,{className:"gap-2 sm:gap-0",children:[(0,s.jsxs)(n.z,{type:"button",variant:"outline",onClick:C,disabled:x,children:[(0,s.jsx)(S.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,s.jsxs)(n.z,{type:"button",onClick:()=>void N(),disabled:x,className:"bg-[#8B5CF6] hover:bg-[#7C3AED]",children:[x?(0,s.jsx)(B.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(P.Z,{className:"h-4 w-4 mr-2"}),x?"Saving...":"Save"]})]})]})})]})}function I(){var e,t;let _=(0,l.useRouter)(),S=(0,i.useLocale)(),B=(0,i.useTranslations)("profile"),P=(0,i.useTranslations)("common"),I=(0,i.useTranslations)("auth"),{toast:E}=(0,k.useToast)(),{user:z,loading:L}=(0,N.useAuthContext)(),[A,U]=(0,r.useState)(!0),[O,Z]=(0,r.useState)({full_name:"",email:"",phone:"",location:"",email_verified:!1,avatar_url:null}),[R,M]=(0,r.useState)("profile"),[T,V]=(0,r.useState)(!1),[J,H]=(0,r.useState)({full_name:"",phone:"",location:""}),[G,W]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(!1),[K,X]=(0,r.useState)({current:"",new:"",confirm:""}),[$,q]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[ee,et]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(""),[er,el]=(0,r.useState)(!1),[ei,en]=(0,r.useState)(!1),ec="carwise_profile_prefs",[ed,eo]=(0,r.useState)({twoFactorEnabled:!1,twoFactorMethod:"email",trustedDevices:[],activeSessions:[],loginHistory:[]}),[ex,eh]=(0,r.useState)({profilePublic:!0,showPhoneInListings:!0,showEmailPublicly:!1,showLocationDetails:!0,marketingEmails:!1,smsNotifications:!1,allowMessagesFromBuyersSellers:!0,pushNotifications:!0,analyticsCookies:!1,marketingCookies:!1,personalizationCookies:!0,essentialCookies:!0,listingsVisibility:"public",whoCanContact:"everyone",showActivityStatus:!0});(0,r.useEffect)(()=>{if(!L){if(!z){let e="/".concat(S,"/profile");_.replace("/".concat(S,"/login?returnUrl=").concat(encodeURIComponent(e)));return}eu()}},[z,L,_,S]),(0,r.useEffect)(()=>(document.body.classList.add("profile-single-bg"),()=>document.body.classList.remove("profile-single-bg")),[]);let eu=(0,r.useCallback)(async()=>{if(z){U(!0);try{let e=z.user_metadata||{},t=e.full_name||e.name||"",a=e.phone_number||"",s=e.location||"",r=e.avatar_url||null;r||(r=localStorage.getItem("profile_avatar_".concat(z.id))),Z({full_name:t,email:z.email||"",phone:a,location:s,email_verified:!!z.email_confirmed_at,avatar_url:r}),H({full_name:t,phone:a,location:s})}catch(e){E({title:P("error"),description:B("failedLoadProfile"),variant:"destructive"})}finally{U(!1)}}},[z,E,B,P]);(0,r.useEffect)(()=>{try{let e=localStorage.getItem(ec);if(e){let t=JSON.parse(e);t.security&&eo(e=>({...e,...t.security})),t.privacy&&eh(e=>({...e,...t.privacy}))}let t=[{id:"1",device:"Windows",browser:"Chrome",location:"Local",lastActive:new Date().toISOString()}],a=[{date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),location:"Local",device:"Chrome on Windows",ip:"127.0.0.1",suspicious:!1}];eo(e=>({...e,activeSessions:e.activeSessions.length?e.activeSessions:t,loginHistory:e.loginHistory.length?e.loginHistory:a}))}catch(e){}},[]);let em=(0,r.useCallback)(e=>{eo(t=>e.security?{...t,...e.security}:t),eh(t=>e.privacy?{...t,...e.privacy}:t);try{let t=localStorage.getItem(ec),a=t?JSON.parse(t):{};e.security&&(a.security={...a.security,...e.security}),e.privacy&&(a.privacy={...a.privacy,...e.privacy}),localStorage.setItem(ec,JSON.stringify(a))}catch(e){}},[]),ep=async()=>{W(!0);try{let{error:e}=await y.supabase.auth.updateUser({data:{full_name:J.full_name||void 0,phone_number:J.phone||void 0,location:J.location||void 0}});if(e)throw e;E({title:B("profileUpdated"),description:B("profileUpdatedDesc")}),V(!1),await eu()}catch(t){let e=t instanceof Error?t.message:B("failedUpdateProfile");E({title:P("error"),description:e,variant:"destructive"})}finally{W(!1)}},eb=async()=>{if(K.new!==K.confirm){E({title:P("error"),description:B("passwordsNoMatch"),variant:"destructive"});return}W(!0);try{let{error:e}=await y.supabase.auth.updateUser({password:K.new});if(e)throw e;E({title:B("passwordChanged"),description:B("passwordChangedDesc")}),Y(!1),X({current:"",new:"",confirm:""})}catch(t){let e=t instanceof Error?t.message:B("failedChangePassword");E({title:P("error"),description:e,variant:"destructive"})}finally{W(!1)}},eg=async()=>{if(z)try{let e=z.user_metadata||{},t={email:z.email,full_name:e.full_name||e.name,phone_number:e.phone_number,location:e.location,avatar_url:O.avatar_url,preferences:{security:ed,privacy:ex},exported_at:new Date().toISOString()},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download="my-data-".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),E({title:B("dataExported"),description:B("dataExportedDesc")})}catch(t){let e=t instanceof Error?t.message:B("failedExportData");E({title:P("error"),description:e,variant:"destructive"})}},ef=async()=>{if(!er){E({title:P("error"),description:B("confirmPermanent"),variant:"destructive"});return}en(!0);try{let{apiClient:e}=await Promise.all([a.e(4829),a.e(3572)]).then(a.bind(a,63572));await e.deleteAccount(),E({title:B("accountDeleted"),description:B("accountDeletedDesc")}),et(!1),es(""),el(!1),_.replace("/".concat(S,"/login"));return}catch(e){}try{let{error:t}=await y.supabase.auth.signOut();if(!t){var e;E({title:B("signedOut"),description:B("signedOutDesc")+" "+(null!==(e=null==z?void 0:z.email)&&void 0!==e?e:""),variant:"destructive"})}}catch(e){}en(!1),et(!1),es(""),el(!1)},ew=e=>{eo(t=>({...t,activeSessions:t.activeSessions.filter(t=>t.id!==e)})),E({title:B("sessionEnded"),description:B("sessionEndedDesc")})};return L?(0,s.jsx)("div",{className:"flex min-h-[calc(100vh-200px)] items-center justify-center p-6 bg-slate-50 dark:bg-[#0f1117]",children:(0,s.jsx)("div",{className:"text-slate-600 dark:text-[#94a3b8]",children:P("loading")})}):z?A?(0,s.jsx)("div",{className:"flex min-h-[calc(100vh-200px)] items-center justify-center p-6 bg-slate-50 dark:bg-[#0f1117]",children:(0,s.jsx)("div",{className:"text-slate-600 dark:text-[#94a3b8]",children:P("loading")})}):(0,s.jsxs)("div",{className:"relative min-h-screen overflow-x-hidden !bg-transparent !shadow-none !border-none text-slate-900 dark:text-gray-100",children:[(0,s.jsx)("div",{className:"fixed inset-0 -z-20 bg-profile-gradient bg-[length:400%_400%] animate-gradient-shift profile-page-bg-animate","aria-hidden":!0}),(0,s.jsx)("div",{className:"fixed inset-0 -z-10 bg-profile-dots bg-[length:28px_28px] pointer-events-none","aria-hidden":!0}),(0,s.jsxs)("div",{className:"relative z-0 max-w-7xl mx-auto px-4 md:px-6 py-4 md:py-6 !bg-transparent !shadow-none !border-none",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-2",children:B("title")}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:B("subtitle")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6 !bg-transparent",children:[(0,s.jsx)("div",{className:"relative !bg-transparent",children:(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/80 dark:bg-white/[0.07] border border-slate-200/80 dark:border-white/10 rounded-2xl p-6 h-fit lg:sticky lg:top-24 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/50 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[z&&(0,s.jsx)(D,{userId:z.id,currentAvatarUrl:O.avatar_url,fallbackLetter:(null===(e=O.full_name)||void 0===e?void 0:e.charAt(0).toUpperCase())||(null===(t=O.email)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U",onAvatarChange:e=>Z(t=>({...t,avatar_url:e}))}),(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mt-4",children:O.full_name||I("user")}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:O.email}),O.email_verified&&(0,s.jsx)(j.C,{className:"mt-2 bg-green-500/20 text-green-400 border-green-500/30",children:"Verified"})]}),(0,s.jsxs)("nav",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:()=>M("profile"),className:"w-full text-left px-4 py-3 min-h-[44px] rounded-lg transition-colors touch-manipulation ".concat("profile"===R?"bg-indigo-100 dark:bg-white/10 text-indigo-900 dark:text-white font-medium":"hover:bg-slate-100 dark:hover:bg-white/5 text-slate-700 dark:text-slate-300"),children:B("profileInfo")}),(0,s.jsx)("button",{onClick:()=>M("security"),className:"w-full text-left px-4 py-3 min-h-[44px] rounded-lg transition-colors touch-manipulation ".concat("security"===R?"bg-indigo-100 dark:bg-white/10 text-indigo-900 dark:text-white font-medium":"hover:bg-slate-100 dark:hover:bg-white/5 text-slate-700 dark:text-slate-300"),children:B("security")}),(0,s.jsx)("button",{onClick:()=>M("privacy"),className:"w-full text-left px-4 py-3 min-h-[44px] rounded-lg transition-colors touch-manipulation ".concat("privacy"===R?"bg-indigo-100 dark:bg-white/10 text-indigo-900 dark:text-white font-medium":"hover:bg-slate-100 dark:hover:bg-white/5 text-slate-700 dark:text-slate-300"),children:B("privacy")})]})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:["profile"===R&&(0,s.jsxs)(s.Fragment,{children:[!O.email_verified&&(0,s.jsx)("div",{className:"backdrop-blur-xl bg-yellow-500/10 border border-yellow-500/30 rounded-2xl p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-yellow-400 font-medium",children:B("pleaseVerifyEmail")}),(0,s.jsx)("p",{className:"text-yellow-300/80 text-sm mt-1",children:B("verifyEmailDesc")})]}),(0,s.jsx)(n.z,{onClick:()=>_.push("/".concat(S,"/verify-email?email=").concat(encodeURIComponent(O.email))),variant:"outline",className:"border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/10 h-12",children:B("verifyEmail")})]})}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:B("profileInfoTitle")}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:B("profileInfoDesc")})]}),(0,s.jsx)("div",{className:"space-y-4",children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"full_name",className:"text-slate-900 dark:text-white",children:B("fullName")}),(0,s.jsx)(c.I,{id:"full_name",value:J.full_name,onChange:e=>H({...J,full_name:e.target.value}),placeholder:B("enterFullName")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"phone",className:"text-slate-900 dark:text-white",children:B("phone")}),(0,s.jsx)(c.I,{id:"phone",value:J.phone,onChange:e=>H({...J,phone:e.target.value}),placeholder:B("enterPhone")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"location",className:"text-slate-900 dark:text-white",children:B("location")}),(0,s.jsx)(c.I,{id:"location",value:J.location,onChange:e=>H({...J,location:e.target.value}),placeholder:B("enterLocation")})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,s.jsx)(C.f,{onClick:ep,loading:G,className:"bg-blue-600 hover:bg-blue-700",children:B("saveChanges")}),(0,s.jsx)(n.z,{variant:"outline",onClick:()=>{V(!1),H({full_name:O.full_name||"",phone:O.phone||"",location:O.location||""})},children:P("cancel")})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-600 dark:text-[#94a3b8]",children:B("fullName")}),(0,s.jsx)("p",{className:"text-slate-900 dark:text-white mt-1",children:O.full_name||B("notSet")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-600 dark:text-[#94a3b8]",children:B("email")}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("p",{className:"text-slate-900 dark:text-white",children:O.email}),O.email_verified?(0,s.jsx)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded",children:B("verified")}):(0,s.jsx)("span",{className:"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded",children:B("unverified")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-600 dark:text-[#94a3b8]",children:B("phone")}),(0,s.jsx)("p",{className:"text-slate-900 dark:text-white mt-1",children:O.phone||B("notSet")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-600 dark:text-[#94a3b8]",children:B("location")}),(0,s.jsx)("p",{className:"text-slate-900 dark:text-white mt-1",children:O.location||B("notSet")})]})]}),(0,s.jsx)(n.z,{onClick:()=>V(!0),className:"mt-4",children:B("editProfile")})]})})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:B("changePassword")}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:B("changePasswordDesc")})]}),(0,s.jsx)("div",{children:Q?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"current_password",className:"text-slate-900 dark:text-white",children:B("currentPassword")}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500 dark:text-[#94a3b8]"}),(0,s.jsx)(c.I,{id:"current_password",type:$.current?"text":"password",value:K.current,onChange:e=>X({...K,current:e.target.value})}),(0,s.jsx)("button",{type:"button",onClick:()=>q({...$,current:!$.current}),className:"absolute right-3 top-3 text-[#94a3b8]",children:$.current?(0,s.jsx)(u.Z,{className:"h-4 w-4"}):(0,s.jsx)(m.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"new_password",className:"text-slate-900 dark:text-white",children:B("newPassword")}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500 dark:text-[#94a3b8]"}),(0,s.jsx)(c.I,{id:"new_password",type:$.new?"text":"password",value:K.new,onChange:e=>X({...K,new:e.target.value})}),(0,s.jsx)("button",{type:"button",onClick:()=>q({...$,new:!$.new}),className:"absolute right-3 top-3 text-[#94a3b8]",children:$.new?(0,s.jsx)(u.Z,{className:"h-4 w-4"}):(0,s.jsx)(m.Z,{className:"h-4 w-4"})})]}),K.new&&(0,s.jsx)(F.Y,{password:K.new,className:"mt-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"confirm_password",className:"text-slate-900 dark:text-white",children:B("confirmNewPassword")}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500 dark:text-[#94a3b8]"}),(0,s.jsx)(c.I,{id:"confirm_password",type:$.confirm?"text":"password",value:K.confirm,onChange:e=>X({...K,confirm:e.target.value})}),(0,s.jsx)("button",{type:"button",onClick:()=>q({...$,confirm:!$.confirm}),className:"absolute right-3 top-3 text-[#94a3b8]",children:$.confirm?(0,s.jsx)(u.Z,{className:"h-4 w-4"}):(0,s.jsx)(m.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.f,{onClick:eb,loading:G,className:"bg-blue-600 hover:bg-blue-700",children:B("updatePassword")}),(0,s.jsx)(n.z,{variant:"outline",onClick:()=>{Y(!1),X({current:"",new:"",confirm:""})},children:P("cancel")})]})]}):(0,s.jsx)(n.z,{onClick:()=>Y(!0),variant:"outline",children:B("changePassword")})})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:B("dataExport")}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:B("dataExportDesc")})]}),(0,s.jsxs)(n.z,{onClick:eg,variant:"outline",className:"w-full md:w-auto",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),B("downloadMyData")]})]})]}),"security"===R&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#8B5CF6]/20",children:(0,s.jsx)(b.Z,{className:"h-5 w-5 text-[#8B5CF6]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:B("twoFactor")}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:B("addExtraSecurity")})]})]}),(0,s.jsx)(x.r,{checked:ed.twoFactorEnabled,onCheckedChange:e=>{eo(t=>({...t,twoFactorEnabled:e})),em({security:{twoFactorEnabled:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),ed.twoFactorEnabled&&(0,s.jsxs)("div",{className:"flex gap-4 pt-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"email"===ed.twoFactorMethod,onChange:()=>em({security:{twoFactorMethod:"email"}}),className:"rounded-full border-slate-300 text-[#8B5CF6] focus:ring-[#8B5CF6]"}),(0,s.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("emailVerification")})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"sms"===ed.twoFactorMethod,onChange:()=>em({security:{twoFactorMethod:"sms"}}),className:"rounded-full border-slate-300 text-[#8B5CF6] focus:ring-[#8B5CF6]"}),(0,s.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("smsVerification")})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#8B5CF6]/20",children:(0,s.jsx)(g.Z,{className:"h-5 w-5 text-[#8B5CF6]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:B("activeSessions")}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:B("devicesSignedIn")})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:ed.activeSessions.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-100 dark:bg-white/5",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-slate-900 dark:text-white",children:[e.device," \xb7 ",e.browser]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[e.location," \xb7 ",B("lastActive"),": ",new Date(e.lastActive).toLocaleString()]})]}),(0,s.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>ew(e.id),children:B("signOut")})]},e.id))}),ed.activeSessions.length>1&&(0,s.jsx)(n.z,{variant:"destructive",size:"sm",className:"mt-4",onClick:()=>{eo(e=>({...e,activeSessions:e.activeSessions.slice(0,1)})),E({title:B("signedOutAll"),description:B("signedOutAllDesc")})},children:B("signOutAllOther")})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#8B5CF6]/20",children:(0,s.jsx)(f.Z,{className:"h-5 w-5 text-[#8B5CF6]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:B("loginHistory")}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:B("recentLoginAttempts")})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-slate-200 dark:border-white/10",children:[(0,s.jsx)("th",{className:"text-left py-2 text-slate-600 dark:text-slate-400",children:B("date")}),(0,s.jsx)("th",{className:"text-left py-2 text-slate-600 dark:text-slate-400",children:B("time")}),(0,s.jsx)("th",{className:"text-left py-2 text-slate-600 dark:text-slate-400",children:B("location")}),(0,s.jsx)("th",{className:"text-left py-2 text-slate-600 dark:text-slate-400",children:B("device")}),(0,s.jsx)("th",{className:"text-left py-2 text-slate-600 dark:text-slate-400",children:"IP"}),(0,s.jsx)("th",{className:"text-left py-2 text-slate-600 dark:text-slate-400",children:B("status")})]})}),(0,s.jsx)("tbody",{children:ed.loginHistory.slice(0,15).map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-slate-100 dark:border-white/5",children:[(0,s.jsx)("td",{className:"py-2 text-slate-900 dark:text-white",children:e.date}),(0,s.jsx)("td",{className:"py-2 text-slate-700 dark:text-slate-300",children:e.time}),(0,s.jsx)("td",{className:"py-2 text-slate-700 dark:text-slate-300",children:e.location}),(0,s.jsx)("td",{className:"py-2 text-slate-700 dark:text-slate-300",children:e.device}),(0,s.jsx)("td",{className:"py-2 text-slate-600 dark:text-slate-400",children:e.ip}),(0,s.jsx)("td",{className:"py-2",children:e.suspicious?(0,s.jsx)(j.C,{variant:"destructive",children:B("suspicious")}):(0,s.jsx)(j.C,{className:"bg-green-500/20 text-green-400",children:"OK"})})]},t))})]})})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#8B5CF6]/20",children:(0,s.jsx)(b.Z,{className:"h-5 w-5 text-[#8B5CF6]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:B("securityQuestions")}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:B("securityQuestionsDesc")})]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:B("securityQuestionsNotSet")}),(0,s.jsx)(n.z,{variant:"outline",size:"sm",className:"border-[#8B5CF6]/50 text-[#8B5CF6] hover:bg-[#8B5CF6]/10",children:B("setupSecurityQuestions")})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#8B5CF6]/20",children:(0,s.jsx)(w.Z,{className:"h-5 w-5 text-[#8B5CF6]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:B("trustedDevices")}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:B("rememberedDevices")})]})]}),0===ed.trustedDevices.length?(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:B("noTrustedDevices")}):(0,s.jsx)("div",{className:"space-y-2",children:ed.trustedDevices.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-100 dark:bg-white/5",children:[(0,s.jsxs)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[e.device," \xb7 ",e.browser]}),(0,s.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>em({security:{trustedDevices:ed.trustedDevices.filter(t=>t.id!==e.id)}}),children:B("remove")})]},e.id))})]})]}),"privacy"===R&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:B("accountVisibility")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("makeProfilePublic")}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B("makeProfilePublicDesc")})]}),(0,s.jsx)(x.r,{checked:ex.profilePublic,onCheckedChange:e=>{eh(t=>({...t,profilePublic:e})),em({privacy:{profilePublic:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("showPhoneInListings")}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B("showPhoneInListingsDesc")})]}),(0,s.jsx)(x.r,{checked:ex.showPhoneInListings,onCheckedChange:e=>{eh(t=>({...t,showPhoneInListings:e})),em({privacy:{showPhoneInListings:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("showEmailPublicly")}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B("showEmailPubliclyDesc")})]}),(0,s.jsx)(x.r,{checked:ex.showEmailPublicly,onCheckedChange:e=>{eh(t=>({...t,showEmailPublicly:e})),em({privacy:{showEmailPublicly:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("showLocationDetails")}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B("showLocationDetailsDesc")})]}),(0,s.jsx)(x.r,{checked:ex.showLocationDetails,onCheckedChange:e=>{eh(t=>({...t,showLocationDetails:e})),em({privacy:{showLocationDetails:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:B("communicationPrefs")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("marketingEmails")}),(0,s.jsx)(x.r,{checked:ex.marketingEmails,onCheckedChange:e=>{eh(t=>({...t,marketingEmails:e})),em({privacy:{marketingEmails:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("smsNotifications")}),(0,s.jsx)(x.r,{checked:ex.smsNotifications,onCheckedChange:e=>{eh(t=>({...t,smsNotifications:e})),em({privacy:{smsNotifications:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("allowMessages")}),(0,s.jsx)(x.r,{checked:ex.allowMessagesFromBuyersSellers,onCheckedChange:e=>{eh(t=>({...t,allowMessagesFromBuyersSellers:e})),em({privacy:{allowMessagesFromBuyersSellers:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("pushNotifications")}),(0,s.jsx)(x.r,{checked:ex.pushNotifications,onCheckedChange:e=>{eh(t=>({...t,pushNotifications:e})),em({privacy:{pushNotifications:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:B("dataManagement")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("downloadAllData")}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B("gdprExport")})]}),(0,s.jsxs)(n.z,{onClick:eg,variant:"outline",size:"sm",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),B("downloadMyData")]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("clearBrowsingHistory")}),(0,s.jsx)(n.z,{onClick:()=>{try{localStorage.removeItem("carwise_recent_predictions"),sessionStorage.clear(),E({title:B("historyCleared"),description:B("browsingHistoryCleared")})}catch(e){E({title:P("error"),description:B("failedClear"),variant:"destructive"})}},variant:"outline",size:"sm",children:P("clear")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("clearSearchHistory")}),(0,s.jsx)(n.z,{onClick:()=>{try{localStorage.removeItem("carwise_search_history"),E({title:B("historyCleared"),description:B("searchHistoryCleared")})}catch(e){E({title:P("error"),description:B("failedClear"),variant:"destructive"})}},variant:"outline",size:"sm",children:P("clear")})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:B("cookiePreferences")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("essentialCookies")}),(0,s.jsx)(x.r,{checked:!0,disabled:!0,className:"data-[state=checked]:bg-[#8B5CF6] opacity-70"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("analyticsCookies")}),(0,s.jsx)(x.r,{checked:ex.analyticsCookies,onCheckedChange:e=>{eh(t=>({...t,analyticsCookies:e})),em({privacy:{analyticsCookies:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("marketingCookies")}),(0,s.jsx)(x.r,{checked:ex.marketingCookies,onCheckedChange:e=>{eh(t=>({...t,marketingCookies:e})),em({privacy:{marketingCookies:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("personalizationCookies")}),(0,s.jsx)(x.r,{checked:ex.personalizationCookies,onCheckedChange:e=>{eh(t=>({...t,personalizationCookies:e})),em({privacy:{personalizationCookies:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-white/90 dark:bg-white/[0.08] border border-slate-200/80 dark:border-white/10 dark:border-[#8B5CF6]/20 rounded-2xl p-6 shadow-lg shadow-black/5 dark:shadow-none ring-1 ring-slate-200/30 dark:ring-white/5",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:B("privacySettings")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("whoCanSeeListings")}),(0,s.jsx)("div",{className:"flex gap-4 mt-2 flex-wrap",children:[{v:"public",l:B("public")},{v:"registered",l:B("registeredUsersOnly")},{v:"private",l:B("private")}].map(e=>{let{v:t,l:a}=e;return(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"listings",checked:ex.listingsVisibility===t,onChange:()=>{eh(e=>({...e,listingsVisibility:t})),em({privacy:{listingsVisibility:t}})},className:"text-[#8B5CF6] focus:ring-[#8B5CF6]"}),(0,s.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:a})]},t)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("whoCanContact")}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"contact",checked:"everyone"===ex.whoCanContact,onChange:()=>{eh(e=>({...e,whoCanContact:"everyone"})),em({privacy:{whoCanContact:"everyone"}})},className:"text-[#8B5CF6] focus:ring-[#8B5CF6]"}),(0,s.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("everyone")})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"contact",checked:"verified"===ex.whoCanContact,onChange:()=>{eh(e=>({...e,whoCanContact:"verified"})),em({privacy:{whoCanContact:"verified"}})},className:"text-[#8B5CF6] focus:ring-[#8B5CF6]"}),(0,s.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("verifiedUsersOnly")})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d._,{className:"text-slate-900 dark:text-white",children:B("showActivityStatus")}),(0,s.jsx)(x.r,{checked:ex.showActivityStatus,onCheckedChange:e=>{eh(t=>({...t,showActivityStatus:e})),em({privacy:{showActivityStatus:e}})},className:"data-[state=checked]:bg-[#8B5CF6]"})]})]})]}),(0,s.jsxs)("div",{className:"backdrop-blur-xl bg-red-500/10 border border-red-500/30 rounded-2xl p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-red-400 mb-2",children:B("deleteAccount")}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-4",children:B("deleteAccountDesc")}),(0,s.jsxs)(n.z,{variant:"destructive",onClick:()=>et(!0),className:"bg-red-600 hover:bg-red-700",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),B("deleteMyAccount")]})]})]})]})]})]}),(0,s.jsx)(o.Vq,{open:ee,onOpenChange:e=>{e||(et(!1),es(""),el(!1))},children:(0,s.jsxs)(o.cZ,{className:"sm:max-w-md",children:[(0,s.jsxs)(o.fK,{children:[(0,s.jsx)(o.$N,{className:"text-red-600 dark:text-red-400",children:B("deleteAccount")}),(0,s.jsx)(o.Be,{className:"text-slate-600 dark:text-[#94a3b8]",children:B("deleteAccountDesc")})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"delete-password",className:"text-slate-900 dark:text-white",children:B("confirmPassword")}),(0,s.jsx)(c.I,{id:"delete-password",type:"password",value:ea,onChange:e=>es(e.target.value),placeholder:B("enterPassword"),className:"mt-1"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:er,onChange:e=>el(e.target.checked),className:"rounded border-slate-300 text-red-600 focus:ring-red-500"}),(0,s.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:B("understandPermanent")})]})]}),(0,s.jsxs)(o.cN,{children:[(0,s.jsx)(n.z,{variant:"outline",onClick:()=>{et(!1),es(""),el(!1)},children:P("cancel")}),(0,s.jsx)(C.f,{onClick:ef,loading:ei,variant:"destructive",disabled:!er,className:"bg-red-600 hover:bg-red-700",children:B("deleteMyAccount")})]})]})})]}):null}},48132:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var s=a(57437),r=a(85754),l=a(58148);function i(e){let{loading:t=!1,loadingText:a,children:i,disabled:n,...c}=e;return(0,s.jsx)(r.z,{disabled:n||t,...c,className:c.className,children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.T,{size:"sm",className:"mr-2"}),a||i]}):i})}},58148:function(e,t,a){"use strict";a.d(t,{T:function(){return n}});var s=a(57437),r=a(86264),l=a(1657);let i={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};function n(e){let{size:t="md",className:a,color:n="text-[#5B7FFF]"}=e;return(0,s.jsx)(r.Z,{className:(0,l.cn)("animate-spin",i[t],n,a)})}},7019:function(e,t,a){"use strict";a.d(t,{Y:function(){return n}});var s=a(57437),r=a(62442),l=a(82549);let i=[{label:"At least 8 characters",test:e=>e.length>=8},{label:"At least one uppercase letter",test:e=>/[A-Z]/.test(e)},{label:"At least one lowercase letter",test:e=>/[a-z]/.test(e)},{label:"At least one number",test:e=>/[0-9]/.test(e)},{label:"At least one special character",test:e=>/[!@#$%^&*(),.?":{}|<>]/.test(e)}];function n(e){let{password:t,className:a=""}=e;if(!t)return null;let n=i.filter(e=>e.test(t)).length/i.length*100;return(0,s.jsxs)("div",{className:"space-y-2 ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Password strength:"}),(0,s.jsx)("span",{className:"text-sm font-semibold ".concat(n<40?"text-red-400":n<80?"text-yellow-400":"text-green-400"),children:n<40?"Weak":n<80?"Medium":"Strong"})]}),(0,s.jsx)("div",{className:"h-2 w-full bg-[#2a2d3a] rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full transition-all duration-300 ".concat(n<40?"bg-red-500":n<80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(n,"%")}})}),(0,s.jsx)("div",{className:"space-y-1.5 mt-3",children:i.map((e,a)=>{let i=e.test(t);return(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[i?(0,s.jsx)(r.Z,{className:"h-3.5 w-3.5 text-green-400"}):(0,s.jsx)(l.Z,{className:"h-3.5 w-3.5 text-red-400"}),(0,s.jsx)("span",{className:i?"text-green-400":"text-[#94a3b8]",children:e.label})]},a)})})]})}},31478:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var s=a(57437),r=a(2265),l=a(1657);let i=r.forwardRef((e,t)=>{let{className:a,variant:r="default",...i}=e,n={default:"bg-[#5B7FFF] text-white",success:"bg-green-600 text-white",warning:"bg-yellow-600 text-white",destructive:"bg-red-600 text-white",secondary:"bg-[#2a2d3a] text-[#94a3b8]",outline:"border border-[#2a2d3a] text-white"};return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n[r]||n.default,a),...i})});i.displayName="Badge"},85754:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var s=a(57437),r=a(2265),l=a(67256),i=a(1657);let n=r.forwardRef((e,t)=>{let{className:a,variant:r="default",size:n="default",asChild:c=!1,...d}=e,o=c?l.g7:"button";return(0,s.jsx)(o,{className:(0,i.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-[#5B7FFF] text-white hover:bg-[#4a6fff]",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-slate-300 dark:border-[#2a2d3a] bg-transparent hover:bg-slate-100 dark:hover:bg-[#2a2d3a] text-slate-900 dark:text-white",secondary:"bg-slate-100 dark:bg-[#2a2d3a] text-slate-900 dark:text-white hover:bg-slate-200 dark:hover:bg-[#3a3d4a]",ghost:"hover:bg-slate-100 dark:hover:bg-[#2a2d3a] text-slate-900 dark:text-white",link:"text-[#5B7FFF] underline-offset-4 hover:underline"}[r],{default:"h-10 sm:h-10 px-4 py-2 min-h-[48px] sm:min-h-[40px]",sm:"h-9 sm:h-9 rounded-md px-3 min-h-[48px] sm:min-h-[36px]",lg:"h-11 sm:h-11 rounded-md px-8 min-h-[48px] sm:min-h-[44px]",icon:"h-10 w-10 sm:h-10 sm:w-10 min-h-[48px] min-w-[48px] sm:min-h-[40px] sm:min-w-[40px]"}[n],a),ref:t,...d})});n.displayName="Button"},42706:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return b},Vq:function(){return c},cN:function(){return m},cZ:function(){return h},fK:function(){return u},hg:function(){return d}});var s=a(57437),r=a(2265),l=a(79515),i=a(82549),n=a(1657);let c=l.fC,d=l.xz,o=l.h_;l.x8;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-[1100] bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});x.displayName=l.aV.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...c}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(l.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-[1100] grid w-full max-w-lg max-h-[90vh] overflow-y-auto overscroll-contain translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[r,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 text-slate-600 dark:text-[#94a3b8]"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.VY.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...r})});p.displayName=l.Dx.displayName;let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-slate-600 dark:text-[#94a3b8]",a),...r})});b.displayName=l.dk.displayName},45179:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(57437),r=a(2265),l=a(1657);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex w-full rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-white/[0.03] backdrop-blur-sm px-4 py-3 min-h-[48px] text-base text-start text-slate-900 dark:text-white/90 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-400 dark:placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/30 focus-visible:ring-offset-2 focus-visible:border-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-300 hover:border-indigo-500/50 dark:hover:border-indigo-500/50 hover:bg-slate-50 dark:hover:bg-white/[0.05] touch-manipulation",a),ref:t,...i})});i.displayName="Input"},49842:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var s=a(57437),r=a(2265),l=a(1657);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("label",{ref:t,className:(0,l.cn)("text-sm font-medium leading-none text-white peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});i.displayName="Label"},86443:function(e,t,a){"use strict";a.d(t,{r:function(){return n}});var s=a(57437),r=a(2265),l=a(92376),i=a(1657);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-[#8B5CF6] data-[state=unchecked]:bg-gray-700",a),...r,ref:t,children:(0,s.jsx)(l.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.fC.displayName},6678:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return n},useAuthContext:function(){return c}});var s=a(57437),r=a(2265),l=a(45922);let i=(0,r.createContext)(null);function n(e){let{children:t}=e,[a,n]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)(null),[h,u]=(0,r.useState)(!0),m=(0,r.useCallback)(async e=>{var t;let{data:a,error:s}=await l.supabase.from("users").select("role").eq("id",e).maybeSingle();return s||!a?null:null!==(t=a.role)&&void 0!==t?t:null},[]),p=(0,r.useCallback)(async()=>{try{let{data:{session:e},error:t}=await l.supabase.auth.getSession();if(t||!e){d(null),n(null),x(null);return}d(e),n(e.user),u(!1);try{let t=await m(e.user.id);x(t)}catch(e){x(null)}}catch(e){d(null),n(null),x(null)}finally{u(!1)}},[m]);(0,r.useEffect)(()=>{p();let{data:{subscription:e}}=l.supabase.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_OUT"===e||!t){d(null),n(null),x(null),u(!1);return}d(t),n(t.user);try{let e=await m(t.user.id);x(e)}finally{u(!1)}}),t=setTimeout(()=>{u(e=>!e&&e)},8e3);return()=>{clearTimeout(t),e.unsubscribe()}},[p,m]);let b=(0,r.useCallback)(async()=>{u(!0),await l.supabase.auth.signOut(),d(null),n(null),x(null),u(!1)},[]),g=(0,r.useMemo)(()=>({user:a,session:c,role:o,isAdmin:"admin"===o,loading:h,signOut:b}),[a,c,o,h,b]);return(0,s.jsx)(i.Provider,{value:g,children:t})}function c(){let e=(0,r.useContext)(i);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},25703:function(e,t,a){"use strict";a.r(t),a.d(t,{ToastProvider:function(){return n},useToast:function(){return c}});var s=a(57437),r=a(2265),l=a(1657);let i=r.createContext({toast:()=>{}});function n(e){let{children:t}=e,[a,n]=r.useState([]),c=r.useCallback(e=>{var t;let a=Math.random().toString(36).substring(7);n(t=>[...t,{...e,id:a}]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==a))},null!==(t=e.duration)&&void 0!==t?t:5e3)},[]);return(0,s.jsxs)(i.Provider,{value:{toast:c},children:[t,(0,s.jsx)("div",{className:"fixed bottom-0 right-0 z-[1200] flex w-full flex-col-reverse gap-2 p-4 sm:flex-col md:max-w-[420px]",children:a.map(e=>(0,s.jsxs)("div",{className:(0,l.cn)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all","destructive"===e.variant?"border border-red-500/50 bg-red-950/30":"border border-[#2a2d3a] bg-[#1a1d29]"),children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[e.title&&(0,s.jsx)("div",{className:(0,l.cn)("text-sm font-semibold","destructive"===e.variant?"text-red-200":"text-white"),children:e.title}),e.description&&(0,s.jsx)("div",{className:(0,l.cn)("text-sm","destructive"===e.variant?"text-red-300/90":"text-[#94a3b8]"),children:e.description})]}),(0,s.jsx)("button",{onClick:()=>n(t=>t.filter(t=>t.id!==e.id)),className:"absolute right-2 top-2 rounded-md p-1 text-[#94a3b8] opacity-0 transition-opacity hover:text-white focus:opacity-100 focus:outline-none group-hover:opacity-100",children:"\xd7"})]},e.id))})]})}function c(){return r.useContext(i)||{toast:e=>{"destructive"===e.variant&&console.error("Error:",e.description)}}}},45922:function(e,t,a){"use strict";a.d(t,{supabase:function(){return s}});let s=(0,a(33226).eI)("https://fehkzrrahgyesxzrwlme.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZlaGt6cnJhaGd5ZXN4enJ3bG1lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxNzcwNjEsImV4cCI6MjA4NDc1MzA2MX0.AI8QaX8nOP8UwcfmgbGN2EN4jmK94i98Kpd3ZtPDZRQ",{auth:{lock:(e,t,a)=>a()}})},1657:function(e,t,a){"use strict";a.d(t,{cb:function(){return o},cn:function(){return l},gQ:function(){return d},uf:function(){return n},wo:function(){return x},xG:function(){return i}});var s=a(57042),r=a(74769);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function n(e){return new Intl.NumberFormat("en-US").format(e)}function c(e){return e<=0||!isFinite(e)?0:Math.round(235.214583/e*10)/10}function d(e,t){let a=c(e),s=c(t);return"".concat(a," / ").concat(s," L/100km")}function o(e){return null!=e&&"string"==typeof e&&/\.(mp4|mov|avi)(\?|$)/i.test(e)}function x(e,t){var a;if(null==e||"string"!=typeof e||!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;let s=(null!==(a=null!=t?t:"http://localhost:8000")&&void 0!==a?a:"").replace(/\/$/,"");return s?s+(e.startsWith("/")?e:"/"+e):e}}},function(e){e.O(0,[7895,116,263,6376,3226,7169,1943,2971,4938,1744],function(){return e(e.s=16399)}),_N_E=e.O()}]);