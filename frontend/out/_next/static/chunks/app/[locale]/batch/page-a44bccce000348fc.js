(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{28773:function(e,t,a){Promise.resolve().then(a.bind(a,87132))},87132:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eI}});var s=a(57437),r=a(2265),l=a(50116),i=a(85754),n=a(63572),c=a(25703),o=a(14196),d=a(55117),x=a(69263),m=a(86264),h=a(97542),u=a(31541),p=a(3857),b=a(82549),f=a(80820),g=a(35817),j=a(1657),v=a(19160),N=a(45179),w=a(61812),y=a.n(w),k=a(62167),F=a(98777);let C={iqcars:{name:"IQCars",logo:"\uD83D\uDE97",color:"#3B82F6",exampleUrl:"https://www.iqcars.net/en/car/..."},dubizzle:{name:"Dubizzle",logo:"\uD83C\uDFE0",color:"#10B981",exampleUrl:"https://www.dubizzle.com/cars/..."},syarah:{name:"Syarah",logo:"\uD83D\uDE99",color:"#F59E0B",exampleUrl:"https://www.syarah.com/car/..."},opensooq:{name:"OpenSooq",logo:"\uD83D\uDED2",color:"#EF4444",exampleUrl:"https://jo.opensooq.com/cars/..."},olx:{name:"OLX",logo:"\uD83D\uDCF1",color:"#8B5CF6",exampleUrl:"https://www.olx.com/cars/..."}};function _(e){if(!e||"string"!=typeof e)return null;let t=e.toLowerCase();return t.includes("iqcars")||t.includes("iqcars.net")?C.iqcars:t.includes("dubizzle")?C.dubizzle:t.includes("syarah")?C.syarah:t.includes("opensooq")?C.opensooq:t.includes("olx.")||t.includes("olx.com")?C.olx:null}function S(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}}var z=a(55322);function B(e){let{platform:t,className:a=""}=e;return t?(0,s.jsx)(z.pn,{children:(0,s.jsxs)(z.u,{children:[(0,s.jsx)(z.aJ,{asChild:!0,children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-[#1a1d29] border border-[#2a2d3a] hover:border-[".concat(t.color,"] transition-colors ").concat(a),style:{borderColor:t.color+"40"},children:[(0,s.jsx)("span",{className:"text-lg",children:t.logo}),(0,s.jsx)("span",{className:"text-sm font-medium text-white",children:t.name})]})}),(0,s.jsxs)(z._v,{children:[(0,s.jsxs)("p",{className:"text-xs",children:["Detected: ",t.name]}),(0,s.jsxs)("p",{className:"text-xs text-[#94a3b8] mt-1",children:["Example: ",t.exampleUrl]})]})]})}):null}var E=a(41827),D=a(92457),P=a(41298);let R=[{id:1,label:"Scraping listing...",icon:(0,s.jsx)(E.Z,{className:"h-4 w-4"}),duration:2e3},{id:2,label:"Extracting car details...",icon:(0,s.jsx)(D.Z,{className:"h-4 w-4"}),duration:1500},{id:3,label:"Calculating price prediction...",icon:(0,s.jsx)(P.Z,{className:"h-4 w-4"}),duration:1e3}];function Z(e){let{isLoading:t,onComplete:a}=e,[l,i]=(0,r.useState)(0),[n,c]=(0,r.useState)(0);return((0,r.useEffect)(()=>{if(!t){i(0),c(0);return}let e=0,s=0,r=R.reduce((e,t)=>e+t.duration,0),l=()=>{if(s<R.length){let t=R[s],l=R.slice(0,s).reduce((e,t)=>e+t.duration,0),n=e-l;t.duration,c((l+n*t.duration/100)/r*100),n>=t.duration&&(i(e=>{let t=e+1;return t>=R.length&&a&&setTimeout(()=>a(),100),t}),s++)}t&&s<R.length?(e+=50,requestAnimationFrame(l)):t&&c(100)},n=setInterval(()=>{t&&l()},50);return()=>clearInterval(n)},[t,a]),t)?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"w-full h-1 bg-[#0f1117] rounded-full overflow-hidden border border-[#2a2d3a]",children:(0,s.jsx)(F.E.div,{className:"h-full bg-gradient-to-r from-[#5B7FFF] to-[#8B5CF6]",initial:{width:0},animate:{width:"".concat(n,"%")},transition:{duration:.3,ease:"easeOut"}})}),(0,s.jsx)("div",{className:"flex items-center justify-center gap-4",children:(0,s.jsx)(k.M,{mode:"wait",children:R.map((e,t)=>{let a=t===l,r=t<l;return(0,s.jsxs)(F.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:a||r?1:.5,scale:a?1.1:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(a?"bg-[#5B7FFF]/20 border border-[#5B7FFF]/50":r?"bg-green-500/10 border border-green-500/30":"bg-[#1a1d29] border border-[#2a2d3a]"),children:[r?(0,s.jsx)("div",{className:"h-4 w-4 rounded-full bg-green-500 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-xs",children:"✓"})}):a?(0,s.jsx)(m.Z,{className:"h-4 w-4 animate-spin text-[#5B7FFF]"}):(0,s.jsx)("div",{className:"h-4 w-4 rounded-full bg-[#2a2d3a]"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(a?"text-[#5B7FFF]":r?"text-green-500":"text-[#94a3b8]"),children:e.label})]},e.id)})})})]}):null}var M=a(27815),L=a(31478),A=a(53711),U=a(74522),T=a(85790),V=a(64891),G=a(11981);function O(e){let{extractedData:t,predictedPrice:a,listingPrice:r,priceComparison:l,confidenceInterval:n,listingUrl:c,carImage:o,message:d}=e;return(null==l?void 0:l.is_below_market)===!0||null==l||l.is_above_market,(0,s.jsx)(F.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,s.jsxs)(M.Zb,{className:"border-[#5B7FFF]/30 bg-[#1a1d29]/80 backdrop-blur-sm",children:[(0,s.jsx)(M.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(M.ll,{className:"text-xl",children:"Prediction Results"}),(0,s.jsx)(M.SZ,{className:"text-[#94a3b8]",children:"Extracted car details and predicted price"})]}),c&&(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(c,"_blank"),className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:[(0,s.jsx)(A.Z,{className:"mr-2 h-4 w-4"}),"View Original Listing"]})]})}),(0,s.jsxs)(M.aY,{className:"space-y-6",children:[o&&(0,s.jsx)("div",{className:"w-full overflow-hidden rounded-lg border border-[#2a2d3a]",children:(0,s.jsx)("img",{src:o,alt:"".concat(t.make," ").concat(t.model),className:"w-full h-auto max-h-[300px] object-cover",onError:e=>{e.currentTarget.style.display="none"}})}),(0,s.jsxs)("div",{className:"text-center p-6 rounded-lg bg-[#5B7FFF]/10 border border-[#5B7FFF]/30",children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8] mb-2",children:"Predicted Market Price"}),(0,s.jsx)("p",{className:"text-4xl font-bold text-[#5B7FFF]",children:(0,j.xG)(a)}),n&&(0,s.jsxs)("p",{className:"text-sm text-[#94a3b8] mt-2",children:["Range: ",(0,j.xG)(n.lower)," -"," ",(0,j.xG)(n.upper)]})]}),r&&l&&(0,s.jsx)("div",{className:"border border-[#2a2d3a] rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-[#0f1117]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-[#94a3b8] border-b border-[#2a2d3a]",children:"Original Listing"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-[#94a3b8] border-b border-[#2a2d3a]",children:"Our Prediction"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-3 text-white border-b border-[#2a2d3a]",children:(0,j.xG)(r)}),(0,s.jsx)("td",{className:"px-4 py-3 text-[#5B7FFF] font-semibold border-b border-[#2a2d3a]",children:(0,j.xG)(a)})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-3 text-[#94a3b8] text-sm",children:"Condition"}),(0,s.jsx)("td",{className:"px-4 py-3 text-white",children:t.condition})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-3 text-[#94a3b8] text-sm",children:"Market Position"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:l.is_below_market?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.Z,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)(L.C,{className:"bg-green-500/20 text-green-500 border-green-500/30",children:"Below Market"})]}):l.is_above_market?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)(L.C,{className:"bg-red-500/20 text-red-500 border-red-500/30",children:"Above Market"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V.Z,{className:"h-4 w-4 text-yellow-500"}),(0,s.jsx)(L.C,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"At Market"})]})})})]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Make"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.make})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Model"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.model})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Year"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.year})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Mileage"}),(0,s.jsxs)("p",{className:"text-white font-semibold",children:[t.mileage.toLocaleString()," km"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Condition"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.condition})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Fuel Type"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.fuel_type})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Engine Size"}),(0,s.jsxs)("p",{className:"text-white font-semibold",children:[t.engine_size,"L"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Cylinders"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.cylinders})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Location"}),(0,s.jsx)("p",{className:"text-white font-semibold",children:t.location})]})]}),d&&(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-[#2a2d3a] border border-[#2a2d3a]",children:[(0,s.jsx)(G.Z,{className:"h-5 w-5 text-[#F59E0B] flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:d})]})]})]})})}var I=a(45253),q=a(44909),$=a(16573),Y=a(24235),K=a(50039),H=a(69333),Q=a(31346),W=a(84051),J=a(28485),X=a(36612);let ee={good:"#10B981",fair:"#F59E0B",poor:"#EF4444",primary:"#5B7FFF",secondary:"#8B5CF6"};function et(e){let{results:t}=e,a=(0,r.useMemo)(()=>{if(0===t.length)return null;let e=t.filter(e=>!e.error),a=[{range:"$0-10k",min:0,max:1e4,count:0},{range:"$10k-20k",min:1e4,max:2e4,count:0},{range:"$20k-30k",min:2e4,max:3e4,count:0},{range:"$30k-50k",min:3e4,max:5e4,count:0},{range:"$50k-75k",min:5e4,max:75e3,count:0},{range:"$75k+",min:75e3,max:1/0,count:0}];e.forEach(e=>{let t=e.predicted_price;for(let e of a)if(t>=e.min&&t<e.max){e.count++;break}});let s=Object.entries({Good:t.filter(e=>!e.error&&"Good"===e.deal_rating).length,Fair:t.filter(e=>!e.error&&"Fair"===e.deal_rating).length,Poor:t.filter(e=>!e.error&&"Poor"===e.deal_rating).length}).filter(e=>{let[,t]=e;return t>0}).map(e=>{let[t,a]=e;return{name:t,value:a}}),r=[{range:"0-20%",min:0,max:20,count:0},{range:"20-40%",min:20,max:40,count:0},{range:"40-60%",min:40,max:60,count:0},{range:"60-80%",min:60,max:80,count:0},{range:"80-100%",min:80,max:100,count:0}];e.forEach(e=>{var t;let a=null!==(t=e.confidence_percent)&&void 0!==t?t:0;for(let e of r)if(a>=e.min&&a<e.max){e.count++;break}});let l=[...e].sort((e,t)=>e.predicted_price-t.predicted_price);return{priceDistribution:a,dealQuality:s,confidenceDistribution:r,bestDeal:l.find(e=>"Good"===e.deal_rating)||l[0],worstDeal:l.reverse().find(e=>"Poor"===e.deal_rating)||l[0]}},[t]);return a&&0!==t.length?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.bestDeal&&(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-500/10 backdrop-blur-sm border border-green-200 dark:border-green-500/20 rounded-2xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("span",{className:"text-2xl",children:"⭐"}),(0,s.jsx)("h4",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:"Best Deal"})]}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:[a.bestDeal.car.make," ",a.bestDeal.car.model]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:(0,j.xG)(a.bestDeal.predicted_price)}),(0,s.jsxs)("p",{className:"text-sm text-slate-600 dark:text-[#94a3b8] mt-1",children:[a.bestDeal.car.year," • ",a.bestDeal.car.mileage.toLocaleString()," km"]})]}),a.worstDeal&&(0,s.jsxs)("div",{className:"bg-red-50 dark:bg-red-500/10 backdrop-blur-sm border border-red-200 dark:border-red-500/20 rounded-2xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("span",{className:"text-2xl",children:"⚠️"}),(0,s.jsx)("h4",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"Overpriced"})]}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:[a.worstDeal.car.make," ",a.worstDeal.car.model]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-2",children:(0,j.xG)(a.worstDeal.predicted_price)}),(0,s.jsxs)("p",{className:"text-sm text-slate-600 dark:text-[#94a3b8] mt-1",children:[a.worstDeal.car.year," • ",a.worstDeal.car.mileage.toLocaleString()," km"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-white/5 backdrop-blur-sm border border-slate-200 dark:border-white/10 rounded-2xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-1",children:"Price Distribution"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-[#94a3b8]",children:"Number of cars by price range"})]}),(0,s.jsx)(I.h,{width:"100%",height:300,children:(0,s.jsxs)(q.v,{data:a.priceDistribution,children:[(0,s.jsx)($.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,s.jsx)(Y.K,{dataKey:"range",stroke:"#94a3b8",fontSize:12}),(0,s.jsx)(K.B,{stroke:"#94a3b8",fontSize:12}),(0,s.jsx)(H.u,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",backdropFilter:"blur(12px)"}}),(0,s.jsx)(Q.$,{dataKey:"count",fill:ee.primary,radius:[8,8,0,0]})]})})]}),(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-white/5 backdrop-blur-sm border border-slate-200 dark:border-white/10 rounded-2xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-1",children:"Deal Quality"}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Breakdown of deal quality ratings"})]}),(0,s.jsx)(I.h,{width:"100%",height:300,children:(0,s.jsxs)(W.u,{children:[(0,s.jsx)(J.b,{data:a.dealQuality,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:a}=e;return"".concat(t,": ").concat((100*a).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:a.dealQuality.map((e,t)=>(0,s.jsx)(X.b,{fill:"Good"===e.name?ee.good:"Fair"===e.name?ee.fair:ee.poor},"cell-".concat(t)))}),(0,s.jsx)(H.u,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",backdropFilter:"blur(12px)"}})]})})]}),(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-white/5 backdrop-blur-sm border border-slate-200 dark:border-white/10 rounded-2xl p-6 lg:col-span-2 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-1",children:"Confidence Score Distribution"}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Distribution of prediction confidence scores"})]}),(0,s.jsx)(I.h,{width:"100%",height:300,children:(0,s.jsxs)(q.v,{data:a.confidenceDistribution,children:[(0,s.jsx)($.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,s.jsx)(Y.K,{dataKey:"range",stroke:"#94a3b8",fontSize:12}),(0,s.jsx)(K.B,{stroke:"#94a3b8",fontSize:12}),(0,s.jsx)(H.u,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",backdropFilter:"blur(12px)"}}),(0,s.jsx)(Q.$,{dataKey:"count",fill:ee.secondary,radius:[8,8,0,0]})]})})]})]})]}):null}var ea=a(45509),es=a(40992),er=a(29691),el=a(9224),ei=a(83523);function en(e){let{results:t,onFilterChange:a}=e,[l,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(""),[d,x]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[f,g]=(0,r.useState)([0,1e6]),[j,v]=(0,r.useState)([1900,2025]),w=(0,r.useMemo)(()=>Array.from(new Set(t.map(e=>e.car.make).filter(Boolean))).sort(),[t]),y=(0,r.useMemo)(()=>0===d.length?Array.from(new Set(t.map(e=>e.car.model).filter(Boolean))).sort():Array.from(new Set(t.filter(e=>d.includes(e.car.make)).map(e=>e.car.model).filter(Boolean))).sort(),[t,d]),k=(0,r.useMemo)(()=>Array.from(new Set(t.map(e=>e.car.condition).filter(Boolean))).sort(),[t]),F=(0,r.useMemo)(()=>{let e=t.map(e=>e.predicted_price).filter(e=>e>0);return{min:Math.min(...e,0),max:Math.max(...e,1e5)}},[t]),C=(0,r.useMemo)(()=>{let e=t.map(e=>e.car.year).filter(e=>e>0);return{min:Math.min(...e,1900),max:Math.max(...e,2025)}},[t]);(0,r.useEffect)(()=>{g([F.min,F.max]),v([C.min,C.max])},[F,C]),(0,r.useEffect)(()=>{a(t.filter(e=>{if(c){let t=c.toLowerCase();if(!"".concat(e.car.make," ").concat(e.car.model," ").concat(e.car.location).toLowerCase().includes(t))return!1}return(!(d.length>0)||!!d.includes(e.car.make))&&(!(m.length>0)||!!m.includes(e.car.model))&&(!(u.length>0)||!!u.includes(e.car.condition))&&!(e.predicted_price<f[0])&&!(e.predicted_price>f[1])&&!(e.car.year<j[0])&&!(e.car.year>j[1])}))},[t,c,d,m,u,f,j,a]);let _=c||d.length>0||m.length>0||u.length>0||f[0]!==F.min||f[1]!==F.max||j[0]!==C.min||j[1]!==C.max;return(0,s.jsxs)(er.zF,{open:l,onOpenChange:n,className:"w-full",children:[(0,s.jsx)(er.wy,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",className:"w-full justify-between border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] hover:bg-slate-100 dark:hover:bg-[#2a2d3a]",children:[(0,s.jsx)("span",{children:"Filters & Search"}),l?(0,s.jsx)(el.Z,{className:"h-4 w-4"}):(0,s.jsx)(ei.Z,{className:"h-4 w-4"})]})}),(0,s.jsx)(er.Fw,{children:(0,s.jsxs)(M.Zb,{className:"mt-4",children:[(0,s.jsx)(M.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(M.ll,{children:"Filter & Search Results"}),(0,s.jsx)(M.SZ,{children:"Filter results by multiple criteria"})]}),_&&(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>{o(""),x([]),h([]),p([]),g([F.min,F.max]),v([C.min,C.max])},className:"text-slate-600 dark:text-[#94a3b8] hover:text-slate-900 dark:hover:text-white",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Reset"]})]})}),(0,s.jsxs)(M.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-[#94a3b8]",children:"Search"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(E.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500 dark:text-[#94a3b8]"}),(0,s.jsx)(N.I,{placeholder:"Search by make, model, or location...",value:c,onChange:e=>o(e.target.value),className:"pl-10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-[#94a3b8]",children:"Make"}),(0,s.jsxs)(ea.Ph,{value:d.length>0?d[0]:"",onValueChange:e=>{e&&!d.includes(e)&&x([...d,e])},children:[(0,s.jsx)(ea.i4,{children:(0,s.jsx)(ea.ki,{placeholder:"Select make"})}),(0,s.jsx)(ea.Bw,{children:w.map(e=>(0,s.jsx)(ea.Ql,{value:e,children:e},e))})]}),d.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:d.map(e=>(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>x(d.filter(t=>t!==e)),className:"border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] hover:bg-slate-100 dark:hover:bg-[#2a2d3a]",children:[e,(0,s.jsx)(b.Z,{className:"h-3 w-3 ml-2"})]},e))})]}),d.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-[#94a3b8]",children:"Model"}),(0,s.jsxs)(ea.Ph,{value:m.length>0?m[0]:"",onValueChange:e=>{e&&!m.includes(e)&&h([...m,e])},children:[(0,s.jsx)(ea.i4,{className:"border-[#2a2d3a] bg-[#0f1117]",children:(0,s.jsx)(ea.ki,{placeholder:"Select model"})}),(0,s.jsx)(ea.Bw,{children:y.map(e=>(0,s.jsx)(ea.Ql,{value:e,children:e},e))})]}),m.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:m.map(e=>(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>h(m.filter(t=>t!==e)),className:"border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] hover:bg-slate-100 dark:hover:bg-[#2a2d3a]",children:[e,(0,s.jsx)(b.Z,{className:"h-3 w-3 ml-2"})]},e))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-[#94a3b8]",children:"Condition"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,s.jsx)(i.z,{variant:u.includes(e)?"default":"outline",size:"sm",onClick:()=>{u.includes(e)?p(u.filter(t=>t!==e)):p([...u,e])},className:u.includes(e)?"bg-[#5B7FFF] hover:bg-[#5B7FFF]/90":"border-[#2a2d3a] bg-[#1a1d29] hover:bg-[#2a2d3a]",children:e},e))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-[#94a3b8]",children:["Price Range: $",f[0].toLocaleString()," - $",f[1].toLocaleString()]}),(0,s.jsx)(es.i,{value:f,onValueChange:e=>g(e),min:F.min,max:F.max,step:1e3,className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-[#94a3b8]",children:["Year Range: ",j[0]," - ",j[1]]}),(0,s.jsx)(es.i,{value:j,onValueChange:e=>v(e),min:C.min,max:C.max,step:1,className:"w-full"})]})]})]})})]})}function ec(e){let{result:t,averagePrice:a,children:r}=e,l=t.deal_rating||"Fair",i=t.predicted_price-a,n=a>0?i/a*100:0,c="",o="";return"Good"===l?(c="".concat(Math.abs(n).toFixed(1),"% below market average (").concat((0,j.xG)(Math.abs(i))," less)"),o="✅ Great deal - Buy now"):"Poor"===l?(c="".concat(Math.abs(n).toFixed(1),"% above market average (").concat((0,j.xG)(Math.abs(i))," more)"),o="❌ Keep looking for better deals"):(c="Matches market average price",o="\uD83D\uDCAC Try negotiating 5-10%"),(0,s.jsx)(z.pn,{children:(0,s.jsxs)(z.u,{children:[(0,s.jsx)(z.aJ,{asChild:!0,children:r}),(0,s.jsx)(z._v,{className:"max-w-xs",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-sm mb-1",children:["Why ",l,"?"]}),(0,s.jsx)("p",{className:"text-xs text-gray-300",children:c})]}),(0,s.jsxs)("div",{className:"border-t border-gray-600 pt-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium",children:"Recommendation:"}),(0,s.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:o})]})]})})]})})}var eo=a(42706),ed=a(72894);function ex(e){let{result:t,children:a}=e,r=t.confidence_interval?Math.round((1-(t.confidence_interval.upper-t.confidence_interval.lower)/t.predicted_price)*100):75,l=[];t.car.condition&&"Unknown"!==t.car.condition||l.push("Service history"),t.car.mileage&&0!==t.car.mileage||l.push("Verified mileage");let i=e=>e>=80?"text-green-500":e>=60?"text-yellow-500":"text-red-500",n=e=>e>=80?"bg-green-500":e>=60?"bg-yellow-500":"bg-red-500";return(0,s.jsxs)(eo.Vq,{children:[(0,s.jsx)(eo.hg,{asChild:!0,children:a}),(0,s.jsxs)(eo.cZ,{className:"max-w-2xl border-[#2a2d3a] bg-[#1a1d29]",children:[(0,s.jsxs)(eo.fK,{children:[(0,s.jsx)(eo.$N,{children:"Confidence Score Breakdown"}),(0,s.jsx)(eo.Be,{className:"text-[#94a3b8]",children:"Detailed analysis of prediction confidence"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg bg-[#2a2d3a] border border-[#2a2d3a]",children:[(0,s.jsx)("p",{className:"text-sm text-[#94a3b8] mb-2",children:"Overall Confidence"}),(0,s.jsxs)("p",{className:"text-4xl font-bold ".concat(i(r)),children:[r,"%"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Confidence Factors"}),[{name:"Data Completeness",value:85,description:"All required fields provided"},{name:"Historical Accuracy",value:90,description:"Past predictions match actual sales"},{name:"Market Data Availability",value:75,description:"Similar cars found in database"}].map((e,t)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-[#94a3b8]",children:e.description})]}),(0,s.jsxs)("span",{className:"text-sm font-semibold ".concat(i(e.value)),children:[e.value,"%"]})]}),(0,s.jsx)("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-[#0f1117] border border-[#2a2d3a]",children:(0,s.jsx)("div",{className:"h-full transition-all duration-500 ease-out ".concat(n(e.value)),style:{width:"".concat(e.value,"%")}})})]},t))]}),l.length>0&&(0,s.jsx)("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(ed.Z,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-yellow-500 mb-2",children:"Missing Information (Affects Accuracy)"}),(0,s.jsx)("ul",{className:"space-y-1",children:l.map((e,t)=>(0,s.jsxs)("li",{className:"text-xs text-[#94a3b8]",children:["⚠️ ",e," not available (-5% confidence)"]},t))})]})]})}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-[#2a2d3a] border border-[#2a2d3a]",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white mb-2",children:"Suggestions to Improve Accuracy"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-[#94a3b8]",children:[l.includes("Service history")&&(0,s.jsx)("li",{children:"• Add service records for +8% confidence"}),l.includes("Verified mileage")&&(0,s.jsx)("li",{children:"• Verify mileage for +3% confidence"}),(0,s.jsx)("li",{children:"• Get vehicle inspection for +5% confidence"})]})]})]})]})]})}var em=a(23444),eh=a(20173),eu=a(82104),ep=a(6141),eb=a(64280);let ef=r.forwardRef((e,t)=>{let{className:a,value:r=0,max:l=100,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,j.cn)("relative h-2 w-full overflow-hidden rounded-full bg-[#0f1117] border border-[#2a2d3a]",a),...i,children:(0,s.jsx)("div",{className:"h-full bg-[#5B7FFF] transition-all duration-500 ease-out",style:{width:"".concat(Math.min(Math.max(r/l*100,0),100),"%")}})})});function eg(e){let{total:t,completed:a,processing:r,failed:l}=e,i=t>0?(a+l)/t*100:0;return(0,s.jsxs)(F.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-[#94a3b8]",children:["Processing URL ",a+l+r," of ",t]}),(0,s.jsxs)("span",{className:"text-[#5B7FFF] font-medium",children:[Math.round(i),"%"]})]}),(0,s.jsx)(ef,{value:i,className:"h-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-[#94a3b8]",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),a," completed"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#5B7FFF] animate-pulse"}),r," processing"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),l," failed"]})]})]})}ef.displayName="Progress";var ej=a(81568);function ev(e){let{count:t=3}=e;return(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:t}).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[#0f1117] border border-[#2a2d3a]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,s.jsx)(ej.O,{className:"h-4 w-4 rounded-full bg-[#2a2d3a]"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(ej.O,{className:"h-4 w-full max-w-md bg-[#2a2d3a]"}),(0,s.jsx)(ej.O,{className:"h-3 w-24 bg-[#2a2d3a]"})]})]}),(0,s.jsx)(ej.O,{className:"h-6 w-20 bg-[#2a2d3a]"})]},t))})}function eN(e){let{onResults:t}=e,[a,l]=(0,r.useState)(""),[o,d]=(0,r.useState)([]),[x,h]=(0,r.useState)(!1),u=(0,c.useToast)()||{toast:()=>{}},p=e=>e.split("\n").map(e=>e.trim()).filter(e=>e.length>0&&S(e)).slice(0,10),b=async()=>{let e=p(a);if(0===e.length){(null==u?void 0:u.toast)&&u.toast({title:"Invalid URLs",description:"Please enter at least one valid URL",variant:"destructive"});return}if(e.length>10){(null==u?void 0:u.toast)&&u.toast({title:"Too Many URLs",description:"Maximum ".concat(10," URLs allowed"),variant:"destructive"});return}h(!0);let s=e.map(e=>({url:e,status:"pending"}));d(s);let r=[],l=[...e],i=0;(async()=>{for(;l.length>0||i>0;){for(;i<3&&l.length>0;){let e=l.shift();i++;let t=s.findIndex(t=>t.url===e);d(e=>{let a=[...e];return a[t]&&(a[t]={...a[t],status:"processing"}),a}),n.apiClient.predictFromUrl(e).then(a=>{r.push({url:e,result:a}),d(e=>{let s=[...e];return s[t]&&(s[t]={...s[t],status:"success",result:a}),s})}).catch(e=>{d(a=>{let s=[...a];return s[t]&&(s[t]={...s[t],status:"error",error:e.message||"Failed to process"}),s})}).finally(()=>{i--})}await new Promise(e=>setTimeout(e,100))}h(!1),t(r),(null==u?void 0:u.toast)&&u.toast({title:"Processing Complete",description:"Processed ".concat(r.length," URLs successfully")})})()},g=e=>{switch(e){case"success":return(0,s.jsx)(eh.Z,{className:"h-4 w-4 text-green-500"});case"error":return(0,s.jsx)(eu.Z,{className:"h-4 w-4 text-red-500"});case"processing":return(0,s.jsx)(m.Z,{className:"h-4 w-4 text-[#5B7FFF] animate-spin"});default:return(0,s.jsx)(ep.Z,{className:"h-4 w-4 text-[#94a3b8]"})}},j=e=>(0,s.jsx)(L.C,{className:{pending:"bg-[#2a2d3a] text-[#94a3b8]",processing:"bg-[#5B7FFF]/20 text-[#5B7FFF]",success:"bg-green-500/20 text-green-500",error:"bg-red-500/20 text-red-500"}[e],children:e.charAt(0).toUpperCase()+e.slice(1)});return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5 text-[#5B7FFF]"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Bulk URL Processing"})]}),(0,s.jsxs)("p",{className:"text-sm text-[#94a3b8]",children:["Process up to ",10," car listing URLs at once (paste one URL per line)"]})]}),(0,s.jsx)(em.g,{placeholder:"https://www.iqcars.net/en/car/...\nhttps://www.dubizzle.com/cars/...\nhttps://www.syarah.com/car/...",value:a,onChange:e=>l(e.target.value),className:"min-h-[200px] bg-white/5 backdrop-blur-sm border-white/10 rounded-2xl font-mono text-sm text-white placeholder:text-[#94a3b8]",disabled:x}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-[#94a3b8]",children:[p(a).length," valid URL",1!==p(a).length?"s":""," detected",p(a).length>10&&(0,s.jsxs)("span",{className:"text-red-500 ml-2",children:["(Max ",10," URLs)"]})]}),(0,s.jsx)(i.z,{onClick:b,disabled:x||0===p(a).length,className:"bg-[#5B7FFF] hover:bg-[#5B7FFF]/90",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Process URLs"})]}),x&&o.length>0&&(0,s.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,s.jsx)(eg,{total:o.length,completed:o.filter(e=>"success"===e.status).length,processing:o.filter(e=>"processing"===e.status).length,failed:o.filter(e=>"error"===e.status).length})}),(0,s.jsx)(k.M,{mode:"wait",children:o.length>0?(0,s.jsx)(F.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2 max-h-[300px] overflow-y-auto bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:o.map((e,t)=>{let r=_(e.url);return(0,s.jsxs)(F.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10 hover:border-[#5B7FFF]/30 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[g(e.status),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm text-white truncate",children:e.url}),r&&(0,s.jsx)("p",{className:"text-xs text-[#94a3b8] mt-1",children:r.name}),e.error&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("p",{className:"text-xs text-red-500",children:e.error}),(0,s.jsxs)("button",{onClick:()=>{p(a).indexOf(e.url)>=0&&(null==u||u.toast({title:"Retry",description:"Retry functionality coming soon"}))},className:"text-xs text-[#5B7FFF] hover:underline flex items-center gap-1",children:[(0,s.jsx)(eb.Z,{className:"h-3 w-3"}),"Retry"]})]}),e.result&&(0,s.jsxs)("p",{className:"text-xs text-green-500 mt-1",children:["$",e.result.predicted_price.toLocaleString()]})]})]}),j(e.status)]},t)})},"status-list"):x?(0,s.jsx)(F.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,s.jsx)(ev,{count:p(a).length})},"skeleton"):null})]})}var ew=a(49842),ey=a(76637),ek=a(1295),eF=a(29764),eC=a(60930),e_=a(42692),eS=a.n(e_);function ez(e){let{results:t,statsDashboardRef:a}=e,[l,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),u=(0,c.useToast)()||{toast:()=>{}},p=async()=>{h(!0);try{let e=new eC.ZP("p","mm","a4"),s=e.internal.pageSize.getWidth(),r=e.internal.pageSize.getHeight();e.setFontSize(20),e.setTextColor(91,127,255),e.text("Car Price Prediction Report",s/2,20,{align:"center"}),e.setFontSize(10),e.setTextColor(148,163,184),e.text("Generated: ".concat(new Date().toLocaleDateString()),s/2,30,{align:"center"});let l=40;if(e.setFontSize(14),e.setTextColor(0,0,0),e.text("Summary",20,l),l+=10,e.setFontSize(10),e.setTextColor(50,50,50),e.text("Total Cars: ".concat(t.length),20,l),l+=7,e.text("Successful: ".concat(t.filter(e=>!e.error).length),20,l),l+=7,e.text("Failed: ".concat(t.filter(e=>e.error).length),20,l),l+=15,null==a?void 0:a.current)try{let t=await eS()(a.current,{background:"#0f1117"}),i=t.toDataURL("image/png"),n=s-40,c=t.height*n/t.width;l+c>r-20&&(e.addPage(),l=20),e.addImage(i,"PNG",20,l,n,c),l+=c+10}catch(e){console.error("Failed to capture charts:",e)}e.setFontSize(14),e.setTextColor(0,0,0),e.text("Predictions",20,l),l+=10,e.setFontSize(9),e.setTextColor(50,50,50);let i=[30,35,20,35,25,25],n=20;["Make","Model","Year","Price","Confidence","Deal"].forEach((t,a)=>{e.text(t,n,l),n+=i[a]}),l+=7,e.setDrawColor(42,45,58),e.line(20,l,s-20,l),l+=5,e.setFontSize(8),t.slice(0,20).forEach(t=>{l>r-20&&(e.addPage(),l=20),n=20,[t.car.make.substring(0,15),t.car.model.substring(0,15),String(t.car.year),"$".concat(t.predicted_price.toLocaleString()),t.confidence_percent?"".concat(t.confidence_percent,"%"):"N/A",t.deal_rating||"N/A"].forEach((t,a)=>{e.setTextColor(0,0,0),e.text(t,n,l),n+=i[a]}),l+=7});let c=e.getNumberOfPages();for(let t=1;t<=c;t++)e.setPage(t),e.setFontSize(8),e.setTextColor(100,100,100),e.text("Page ".concat(t," of ").concat(c),s/2,r-10,{align:"center"});e.save("car-predictions-".concat(new Date().toISOString().split("T")[0],".pdf")),(null==u?void 0:u.toast)&&u.toast({title:"Success",description:"PDF exported successfully"})}catch(e){console.error("PDF export error:",e),(null==u?void 0:u.toast)&&u.toast({title:"Error",description:(null==e?void 0:e.message)||"Failed to export PDF",variant:"destructive"})}finally{h(!1)}},b=async()=>{if(!o||!o.includes("@")){(null==u?void 0:u.toast)&&u.toast({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}h(!0);try{await p(),(null==u?void 0:u.toast)&&u.toast({title:"Email Sent",description:"Report will be sent to ".concat(o)}),n(!1),d("")}catch(e){(null==u?void 0:u.toast)&&u.toast({title:"Error",description:(null==e?void 0:e.message)||"Failed to send email",variant:"destructive"})}finally{h(!1)}},f=e=>{let t=window.location.href,a=encodeURIComponent("Check out these car price predictions! ".concat(t));"whatsapp"===e?window.open("https://wa.me/?text=".concat(a),"_blank"):"telegram"===e&&window.open("https://t.me/share/url?url=".concat(encodeURIComponent(t),"&text=").concat(a),"_blank")};return(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)(i.z,{onClick:p,disabled:x||0===t.length,variant:"outline",className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:[x?(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(ey.Z,{className:"mr-2 h-4 w-4"}),"Export PDF"]}),(0,s.jsxs)(eo.Vq,{open:l,onOpenChange:n,children:[(0,s.jsx)(eo.hg,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:[(0,s.jsx)(ek.Z,{className:"mr-2 h-4 w-4"}),"Email Report"]})}),(0,s.jsxs)(eo.cZ,{className:"border-[#2a2d3a] bg-[#1a1d29]",children:[(0,s.jsxs)(eo.fK,{children:[(0,s.jsx)(eo.$N,{children:"Email Report"}),(0,s.jsx)(eo.Be,{className:"text-[#94a3b8]",children:"Enter your email address to receive the prediction report"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(ew._,{htmlFor:"email",className:"text-[#94a3b8]",children:"Email Address"}),(0,s.jsx)(N.I,{id:"email",type:"email",value:o,onChange:e=>d(e.target.value),placeholder:"your.email@example.com",className:"mt-2 border-[#2a2d3a] bg-[#0f1117]"})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)(i.z,{variant:"outline",onClick:()=>n(!1),className:"border-[#2a2d3a]",children:"Cancel"}),(0,s.jsx)(i.z,{onClick:b,disabled:x,className:"bg-[#5B7FFF] hover:bg-[#5B7FFF]/90",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Report"})]})]})]})]}),(0,s.jsxs)(eo.Vq,{children:[(0,s.jsx)(eo.hg,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:[(0,s.jsx)(eF.Z,{className:"mr-2 h-4 w-4"}),"Share"]})}),(0,s.jsxs)(eo.cZ,{className:"border-[#2a2d3a] bg-[#1a1d29]",children:[(0,s.jsxs)(eo.fK,{children:[(0,s.jsx)(eo.$N,{children:"Share Report"}),(0,s.jsx)(eo.Be,{className:"text-[#94a3b8]",children:"Share your prediction report via social media"})]}),(0,s.jsxs)("div",{className:"space-y-3 py-4",children:[(0,s.jsx)(i.z,{onClick:()=>f("whatsapp"),className:"w-full bg-green-500 hover:bg-green-600",children:"Share on WhatsApp"}),(0,s.jsx)(i.z,{onClick:()=>f("telegram"),className:"w-full bg-blue-500 hover:bg-blue-600",children:"Share on Telegram"})]})]})]})]})}var eB=a(19408);function eE(e){let{results:t,selectedIds:a,onSelectionChange:l,onClearSelection:n}=e,[c,o]=(0,r.useState)(!1),d=t.filter((e,t)=>a.has(t));return 0===a.size?null:c&&d.length>0?(0,s.jsx)(F.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:(0,s.jsxs)(M.Zb,{className:"border-[#5B7FFF]/30 bg-[#1a1d29]",children:[(0,s.jsx)(M.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(M.ll,{children:["Compare Cars (",d.length,")"]}),(0,s.jsx)(M.SZ,{className:"text-[#94a3b8]",children:"Side-by-side comparison of selected cars"})]}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{o(!1),n()},className:"text-[#94a3b8] hover:text-white",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})})]})}),(0,s.jsx)(M.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("div",{className:"inline-flex gap-4 min-w-full",children:d.map((e,t)=>{var a;return(0,s.jsx)(M.Zb,{className:"min-w-[280px] border-[#2a2d3a] bg-[#0f1117]",children:(0,s.jsxs)(M.aY,{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-bold text-white text-lg",children:[e.car.make," ",e.car.model]}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:e.car.year})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[#94a3b8]",children:"Price:"}),(0,s.jsx)("p",{className:"text-[#5B7FFF] font-bold text-lg",children:(0,j.xG)(e.predicted_price)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[#94a3b8]",children:"Mileage:"}),(0,s.jsxs)("p",{className:"text-white",children:[e.car.mileage.toLocaleString()," km"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[#94a3b8]",children:"Condition:"}),(0,s.jsx)("p",{className:"text-white",children:e.car.condition})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[#94a3b8]",children:"Confidence:"}),(0,s.jsxs)("p",{className:"text-white",children:[null!==(a=e.confidence_percent)&&void 0!==a?a:"N/A","%"]})]}),e.deal_rating&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[#94a3b8]",children:"Deal:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs font-semibold ".concat("Good"===e.deal_rating?"bg-green-500/20 text-green-500":"Poor"===e.deal_rating?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"),children:e.deal_rating})]})]})]})},t)})})})})]})}):(0,s.jsx)(F.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4",children:(0,s.jsx)(M.Zb,{className:"border-[#5B7FFF]/30 bg-[#1a1d29]",children:(0,s.jsx)(M.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eh.Z,{className:"h-5 w-5 text-[#5B7FFF]"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-white",children:[a.size," car",a.size>1?"s":""," selected"]}),(0,s.jsx)("p",{className:"text-xs text-[#94a3b8]",children:"Select 2-4 cars to compare side-by-side"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[a.size>=2&&a.size<=4&&(0,s.jsxs)(i.z,{onClick:()=>{a.size>=2&&a.size<=4&&o(!0)},className:"bg-[#5B7FFF] hover:bg-[#5B7FFF]/90",children:[(0,s.jsx)(eB.Z,{className:"mr-2 h-4 w-4"}),"Compare Selected"]}),(0,s.jsx)(i.z,{variant:"outline",onClick:n,className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:"Clear"})]})]})})})})}var eD=a(17810),eP=a(17158);function eR(e){let{results:t,isFavorite:a,onToggleFavorite:r,onViewDetails:l}=e;return(0,s.jsx)("div",{className:"space-y-4 md:hidden",children:t.map((e,t)=>(0,s.jsx)(M.Zb,{className:"border-[#2a2d3a] bg-[#1a1d29] hover:border-[#5B7FFF]/30 transition-colors",children:(0,s.jsxs)(M.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-white",children:[e.car.make," ",e.car.model]}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:e.car.year})]}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>r(t),className:"h-8 w-8 p-0 ".concat(a(t)?"text-red-500":"text-[#94a3b8]"),children:(0,s.jsx)(eD.Z,{className:"h-5 w-5 ".concat(a(t)?"fill-red-500":"")})})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Price"}),(0,s.jsx)("span",{className:"text-xl font-bold text-[#5B7FFF]",children:(0,j.xG)(e.predicted_price)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Mileage"}),(0,s.jsxs)("span",{className:"text-sm text-white",children:[e.car.mileage.toLocaleString()," km"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Condition"}),(0,s.jsx)("span",{className:"text-sm text-white",children:e.car.condition})]}),void 0!==e.confidence_percent&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Confidence"}),(0,s.jsxs)("span",{className:"text-sm font-medium ".concat(e.confidence_percent>=80?"text-green-500":e.confidence_percent>=60?"text-yellow-500":"text-red-500"),children:[e.confidence_percent,"%"]})]}),e.deal_rating&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Deal"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Good"===e.deal_rating?"bg-green-500/20 text-green-500":"Poor"===e.deal_rating?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"),children:e.deal_rating})]})]}),(0,s.jsxs)(i.z,{variant:"outline",className:"w-full border-[#2a2d3a] hover:bg-[#2a2d3a]",onClick:()=>l(t),children:["View Details",(0,s.jsx)(eP.Z,{className:"ml-2 h-4 w-4 rtl:rotate-180"})]})]})},t))})}var eZ=a(3021),eM=a(9883),eL=a(45367);let eA="car-price-alerts";function eU(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({make:"",model:"",maxPrice:"",location:""}),d=(0,c.useToast)()||{toast:()=>{}};(0,r.useEffect)(()=>{x()},[]);let x=()=>{try{let e=localStorage.getItem(eA);e&&t(JSON.parse(e))}catch(e){console.error("Failed to load alerts:",e)}},m=e=>{try{localStorage.setItem(eA,JSON.stringify(e)),t(e)}catch(e){console.error("Failed to save alerts:",e)}},h=t=>{m(e.filter(e=>e.id!==t)),(null==d?void 0:d.toast)&&d.toast({title:"Alert Deleted",description:"Price alert has been removed"})},u=t=>{m(e.map(e=>e.id===t?{...e,active:!e.active}:e))};return(0,s.jsxs)(M.Zb,{className:"border-[#2a2d3a] bg-[#1a1d29] mb-6",children:[(0,s.jsx)(M.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(M.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(eZ.Z,{className:"h-5 w-5 text-[#5B7FFF]"}),"Price Alerts"]}),(0,s.jsx)(M.SZ,{className:"text-[#94a3b8]",children:"Get notified when cars matching your criteria are found"})]}),(0,s.jsxs)(er.zF,{open:a,onOpenChange:l,children:[(0,s.jsx)(er.wy,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",size:"sm",className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:[(0,s.jsx)(eM.Z,{className:"h-4 w-4 mr-2"}),"New Alert"]})}),(0,s.jsx)(er.Fw,{children:(0,s.jsxs)(M.aY,{className:"pt-4 space-y-4 border-t border-[#2a2d3a] mt-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-[#94a3b8] mb-2 block",children:"Make"}),(0,s.jsx)(N.I,{value:n.make,onChange:e=>o({...n,make:e.target.value}),placeholder:"Toyota",className:"border-[#2a2d3a] bg-[#0f1117]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-[#94a3b8] mb-2 block",children:"Model"}),(0,s.jsx)(N.I,{value:n.model,onChange:e=>o({...n,model:e.target.value}),placeholder:"Camry",className:"border-[#2a2d3a] bg-[#0f1117]"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-[#94a3b8] mb-2 block",children:"Max Price ($)"}),(0,s.jsx)(N.I,{type:"number",value:n.maxPrice,onChange:e=>o({...n,maxPrice:e.target.value}),placeholder:"25000",className:"border-[#2a2d3a] bg-[#0f1117]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-[#94a3b8] mb-2 block",children:"Location (Optional)"}),(0,s.jsx)(N.I,{value:n.location,onChange:e=>o({...n,location:e.target.value}),placeholder:"California",className:"border-[#2a2d3a] bg-[#0f1117]"})]}),(0,s.jsx)(i.z,{onClick:()=>{if(e.length>=10){(null==d?void 0:d.toast)&&d.toast({title:"Limit Reached",description:"Maximum ".concat(10," alerts allowed"),variant:"destructive"});return}if(!n.make||!n.model||!n.maxPrice){(null==d?void 0:d.toast)&&d.toast({title:"Missing Fields",description:"Please fill in all required fields",variant:"destructive"});return}m([...e,{id:Date.now().toString(),make:n.make,model:n.model,maxPrice:parseFloat(n.maxPrice),location:n.location||void 0,createdAt:Date.now(),active:!0,matches:0}]),o({make:"",model:"",maxPrice:"",location:""}),l(!1),(null==d?void 0:d.toast)&&d.toast({title:"Alert Created",description:"You'll be notified when ".concat(n.make," ").concat(n.model," is found under $").concat(parseFloat(n.maxPrice).toLocaleString())})},className:"w-full bg-[#5B7FFF] hover:bg-[#5B7FFF]/90",children:"Create Alert"})]})})]})]})}),e.length>0&&(0,s.jsx)(M.aY,{children:(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[#0f1117] border border-[#2a2d3a]",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"font-medium text-white",children:[e.make," ",e.model]}),(0,s.jsx)(L.C,{className:e.active?"bg-green-500/20 text-green-500":"bg-[#2a2d3a] text-[#94a3b8]",children:e.active?"Active":"Inactive"}),void 0!==e.matches&&e.matches>0&&(0,s.jsxs)(L.C,{className:"bg-[#5B7FFF]/20 text-[#5B7FFF]",children:[e.matches," match",e.matches>1?"es":""]})]}),(0,s.jsxs)("p",{className:"text-sm text-[#94a3b8] mt-1",children:["Under $",e.maxPrice.toLocaleString(),e.location&&" • ".concat(e.location)]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>u(e.id),className:"h-8 w-8 p-0",children:(0,s.jsx)(eZ.Z,{className:"h-4 w-4 ".concat(e.active?"text-green-500":"text-[#94a3b8]")})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>h(e.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-600",children:(0,s.jsx)(eL.Z,{className:"h-4 w-4"})})]})]},e.id))})})]})}let eT={invalid_url:{icon:G.Z,color:"text-yellow-500",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/30"},scraping_failed:{icon:ed.Z,color:"text-red-500",bgColor:"bg-red-500/10",borderColor:"border-red-500/30"},api_timeout:{icon:G.Z,color:"text-blue-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/30"},unknown:{icon:G.Z,color:"text-red-500",bgColor:"bg-red-500/10",borderColor:"border-red-500/30"}};function eV(e){let{error:t,onRetry:a,onDismiss:r}=e,l=eT[t.type]||eT.unknown,n=l.icon;return(0,s.jsx)(F.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,s.jsxs)(M.Zb,{className:"".concat(l.bgColor," ").concat(l.borderColor," border"),children:[(0,s.jsx)(M.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(n,{className:"h-5 w-5 ".concat(l.color," flex-shrink-0 mt-0.5")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(M.ll,{className:"text-white",children:t.title}),(0,s.jsx)(M.SZ,{className:"text-[#94a3b8] mt-1",children:t.message})]})]}),r&&(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0 text-[#94a3b8] hover:text-white",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})})]})}),(0,s.jsxs)(M.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-[#0f1117] border border-[#2a2d3a]",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white mb-1",children:"\uD83D\uDCA1 Suggestion:"}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:t.suggestion})]}),t.code&&(0,s.jsx)("div",{className:"p-3 rounded-lg bg-[#0f1117] border border-[#2a2d3a]",children:(0,s.jsx)("p",{className:"text-xs text-[#94a3b8] font-mono",children:t.code})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[a&&(0,s.jsxs)(i.z,{onClick:a,variant:"outline",className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:[(0,s.jsx)(eb.Z,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{window.location.href="mailto:support@example.com?subject=Error Report&body=Error Type: ".concat(t.type,"%0A%0A").concat(t.message)},className:"border-[#2a2d3a] hover:bg-[#2a2d3a]",children:"Contact Support"})]})]})]})})}let eG="car-price-predictor-favorites";var eO=a(54900);function eI(){let[e,t]=(0,r.useState)(!1),[a,w]=(0,r.useState)(null),[C,z]=(0,r.useState)([]),[E,D]=(0,r.useState)(!1),[P,R]=(0,r.useState)(0),[M,L]=(0,r.useState)({current:0,total:0}),[A,U]=(0,r.useState)(!1),[T,V]=(0,r.useState)(null),[G,I]=(0,r.useState)(null),[q,$]=(0,r.useState)(""),[Y,K]=(0,r.useState)([]),[H,Q]=(0,r.useState)([]),[W,J]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(null),[ea,es]=(0,r.useState)(new Set),[er,el]=(0,r.useState)(null),ei=(0,r.useRef)(null),eo=function(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{let e=localStorage.getItem(eG);e&&t(JSON.parse(e))}catch(e){console.error("Failed to load favorites:",e)}},[]);let a=e=>{try{localStorage.setItem(eG,JSON.stringify(e)),t(e)}catch(e){console.error("Failed to save favorites:",e)}},s=t=>{a([...e,t])},l=t=>{a(e.filter(e=>e.id!==t))},i=t=>e.some(e=>e.id===t);return{favorites:e,addFavorite:s,removeFavorite:l,isFavorite:i,toggleFavorite:e=>{i(e.id)?l(e.id):s(e)}}}(),[ed,em]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)("bulk-url"),[ep,eb]=(0,r.useState)(null),ef=(0,l.useTranslations)("batch"),eg=(0,l.useTranslations)("common"),ej=(0,c.useToast)()||{toast:()=>{}};(0,r.useEffect)(()=>{t(!0);{let e=()=>em(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]),(0,r.useEffect)(()=>{q&&q.trim()?ee(_(q)):ee(null)},[q]);let ev=(0,r.useMemo)(()=>{if(0===C.length)return[];let e=C.reduce((e,t)=>e+(t.predicted_price||0),0)/C.length;return C.map(t=>{let a=t.confidence_interval?Math.round((1-(t.confidence_interval.upper-t.confidence_interval.lower)/t.predicted_price)*100):void 0,s=t.confidence_interval?{min:t.confidence_interval.lower,max:t.confidence_interval.upper}:void 0,r="Fair";if(t.predicted_price>0&&e>0){let a=t.predicted_price/e;r=a<.85?"Good":a>1.15?"Poor":"Fair"}return{...t,confidence_percent:a,price_range:s,deal_rating:r}})},[C]),ew=e=>{T===e?"asc"===G?I("desc"):"desc"===G?(V(null),I(null)):I("asc"):(V(e),I("asc"))};(0,r.useEffect)(()=>{K(ev)},[ev]);let ey=(0,r.useMemo)(()=>{let e=Y.length>0?Y:ev;return T&&G?[...e].sort((e,t)=>{var a,s,r,l;let i,n;switch(T){case"make":i=e.car.make,n=t.car.make;break;case"model":i=e.car.model,n=t.car.model;break;case"year":i=e.car.year,n=t.car.year;break;case"mileage":i=e.car.mileage,n=t.car.mileage;break;case"condition":i=e.car.condition,n=t.car.condition;break;case"predicted_price":i=e.predicted_price,n=t.predicted_price;break;case"confidence":i=null!==(a=e.confidence_percent)&&void 0!==a?a:0,n=null!==(s=t.confidence_percent)&&void 0!==s?s:0;break;case"deal_rating":let c={Good:1,Fair:2,Poor:3};i=c[null!==(r=e.deal_rating)&&void 0!==r?r:"Fair"],n=c[null!==(l=t.deal_rating)&&void 0!==l?l:"Fair"];break;default:return 0}return i<n?"asc"===G?-1:1:i>n?"asc"===G?1:-1:0}):e},[Y,ev,T,G]),ek=(0,r.useMemo)(()=>{if(0===ey.length)return null;let e=ey.filter(e=>!e.error),t=e.length>0?e.reduce((e,t)=>e+t.predicted_price,0)/e.length:0,a=ey.filter(e=>!e.error&&"Good"===e.deal_rating).sort((e,t)=>e.predicted_price-t.predicted_price)[0],s=ey.filter(e=>!e.error).sort((e,t)=>t.predicted_price-e.predicted_price)[0];return{total:ey.length,successful:e.length,failed:ey.filter(e=>e.error).length,averagePrice:t,bestDeal:a?"".concat(a.car.make," ").concat(a.car.model):"N/A",highestValue:s?"".concat(s.car.make," ").concat(s.car.model):"N/A"}},[ey]);if(!e)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"text-[#94a3b8]",children:"Loading..."})});let eF=e=>{try{if(!e){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"No file selected",variant:"destructive"});return}if(!e.name||!e.name.endsWith(".csv")){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Please upload a CSV file",variant:"destructive"});return}if(e.size>5242880){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"File size must be less than 5MB",variant:"destructive"});return}w(e)}catch(e){console.error("Error validating file:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Failed to validate file",variant:"destructive"})}},eC=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?U(!0):"dragleave"===e.type&&U(!1)},e_=async()=>{if(!a){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Please select a CSV file",variant:"destructive"});return}D(!0),z([]),R(0),L({current:0,total:0});try{let e=new FileReader;e.onload=async e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;R(25),y().parse(a,{header:!0,skipEmptyLines:!0,dynamicTyping:!1,complete:async e=>{if(Q(e.data.slice(0,5)),R(50),e.data.length>1e3){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Maximum 1000 rows allowed. Please split your file.",variant:"destructive"}),D(!1),R(0),L({current:0,total:0});return}let t=e.data.filter((e,t)=>{let a=!!e.year,s=!!e.make,r=!!e.model;return a&&s&&r}).map(e=>({year:parseInt(e.year),mileage:parseFloat(e.mileage)||0,engine_size:parseFloat(e.engine_size)||2.5,cylinders:parseInt(e.cylinders)||4,make:e.make,model:e.model,condition:e.condition||"Good",fuel_type:e.fuel_type||"Gasoline",location:e.location||"Unknown"}));if(0===t.length){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"No valid car data found in CSV. Please check required columns: year, make, model",variant:"destructive"}),D(!1),R(0),L({current:0,total:0});return}R(60),L({current:0,total:t.length});try{let e=await n.apiClient.predictBatch(t);R(100),L({current:t.length,total:t.length}),z(e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("success"):null)||"Success",description:"Processed ".concat(e.length," cars successfully")})}catch(e){console.error("❌ [Batch] Batch prediction failed:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:(null==e?void 0:e.message)||"Failed to process batch",variant:"destructive"}),D(!1),R(0),L({current:0,total:0})}},error:e=>{console.error("❌ [Batch] Papa Parse error:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"CSV parsing error: ".concat((null==e?void 0:e.message)||"Unknown error"),variant:"destructive"}),D(!1),R(0),L({current:0,total:0})}})},e.readAsText(a)}catch(e){console.error("❌ [Batch] Error processing batch:",e),console.error("❌ [Batch] Error message:",null==e?void 0:e.message),console.error("❌ [Batch] Error stack:",null==e?void 0:e.stack),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:(null==e?void 0:e.message)||"Failed to process batch",variant:"destructive"}),D(!1),R(0),L({current:0,total:0})}finally{D(!1)}},eS=e=>t=>{t.preventDefault(),ew(e)},eB=e=>T!==e?(0,s.jsx)(o.Z,{className:"h-3 w-3 ml-1 opacity-50"}):"asc"===G?(0,s.jsx)(d.Z,{className:"h-3 w-3 ml-1 text-[#5B7FFF]"}):"desc"===G?(0,s.jsx)(x.Z,{className:"h-3 w-3 ml-1 text-[#5B7FFF]"}):(0,s.jsx)(o.Z,{className:"h-3 w-3 ml-1 opacity-50"}),eD=async()=>{if(0===ey.length){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"No results to export",variant:"destructive"});return}try{let e=ey.map(e=>{var t,a,s,r,l,i,n;return{make:e.car.make,model:e.car.model,year:e.car.year,mileage:e.car.mileage,condition:e.car.condition,fuel_type:e.car.fuel_type,location:e.car.location,predicted_price:e.predicted_price,confidence_percent:null!==(s=e.confidence_percent)&&void 0!==s?s:"N/A",price_range_min:null!==(r=null===(t=e.price_range)||void 0===t?void 0:t.min)&&void 0!==r?r:"N/A",price_range_max:null!==(l=null===(a=e.price_range)||void 0===a?void 0:a.max)&&void 0!==l?l:"N/A",deal_rating:null!==(i=e.deal_rating)&&void 0!==i?i:"N/A",error:null!==(n=e.error)&&void 0!==n?n:""}}),t=await n.apiClient.exportExcel(e);n.apiClient.downloadBlob(t,"batch_predictions.xlsx"),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("success"):null)||"Success",description:"Excel file exported successfully"})}catch(e){console.error("Error exporting Excel:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:(null==e?void 0:e.message)||"Failed to export Excel",variant:"destructive"})}},eP=async()=>{if(!q||!q.trim()){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Please enter a car listing URL",variant:"destructive"});return}if(!S(q.trim())){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Invalid URL format. Please enter a valid URL starting with http:// or https://",variant:"destructive"});return}!function(e){let t=e.toLowerCase();return["car","vehicle","automobile","auto","listing","ad","advertisement"].some(e=>t.includes(e))}(q.trim())&&!X&&(null==ej?void 0:ej.toast)&&ej.toast({title:"Warning",description:"This URL may not be a car listing. Continue anyway?",variant:"default"}),J(!0),eb(null);try{let e=await n.apiClient.predictFromUrl(q.trim());eb({...e,listing_url:q.trim()}),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("success"):null)||"Success",description:"Car details extracted and price predicted successfully"})}catch(t){console.error("Error predicting from URL:",t);let e=function(e,t){if(e&&"object"==typeof e&&"message"in e){let a=String(e.message).toLowerCase();if(a.includes("url")||a.includes("invalid"))return{type:"invalid_url",title:"Unable to Access Listing",message:"The URL format is incorrect or the page could not be found.",suggestion:"Check the URL and try again. Make sure it starts with http:// or https://",code:t};if(a.includes("scraping")||a.includes("extract"))return{type:"scraping_failed",title:"Data Extraction Failed",message:"We couldn't extract car details from this listing.",suggestion:"Try a different platform or enter the car details manually using the form above.",code:t};if(a.includes("timeout")||a.includes("timed out"))return{type:"api_timeout",title:"Request Timed Out",message:"The server took too long to respond.",suggestion:"Check your internet connection and try again. The server may be busy.",code:t}}return{type:"unknown",title:"An Error Occurred",message:e instanceof Error?e.message:"Something went wrong",suggestion:"Please try again. If the problem persists, contact support.",code:t}}(t,q);el(e),(null==ej?void 0:ej.toast)&&ej.toast({title:e.title,description:e.message,variant:"destructive"})}finally{J(!1)}};return(0,s.jsx)("div",{className:"container py-8 md:py-12",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:(ef&&"function"==typeof ef?ef("title"):null)||"Batch Prediction"}),(0,s.jsx)("p",{className:"text-[#94a3b8]",children:(ef&&"function"==typeof ef?ef("description"):null)||"Upload a CSV file to predict prices for multiple cars"})]}),(0,s.jsxs)("div",{className:"relative mb-8",children:[(0,s.jsx)("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-purple-500/20 via-indigo-500/15 to-transparent rounded-3xl blur-3xl opacity-50"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6 p-1 bg-black/40 backdrop-blur-sm rounded-full border border-white/10 w-fit",children:[(0,s.jsx)("button",{onClick:()=>eu("bulk-url"),className:"px-4 py-2 rounded-full text-sm font-medium transition-all ".concat("bulk-url"===eh?"bg-[#5B7FFF] text-white shadow-lg shadow-[#5B7FFF]/20":"text-[#94a3b8] hover:text-white"),children:"Bulk URL"}),(0,s.jsx)("button",{onClick:()=>eu("csv"),className:"px-4 py-2 rounded-full text-sm font-medium transition-all ".concat("csv"===eh?"bg-[#5B7FFF] text-white shadow-lg shadow-[#5B7FFF]/20":"text-[#94a3b8] hover:text-white"),children:"CSV Upload"})]}),"bulk-url"===eh&&(0,s.jsx)(eN,{onResults:e=>{z([...C,...e.map(e=>({car:e.result.extracted_data,predicted_price:e.result.predicted_price,confidence_interval:e.result.confidence_interval}))])}}),"csv"===eh&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Upload CSV File"}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:(ef&&"function"==typeof ef?ef("upload.instructions"):null)||"Upload a CSV file with car data"})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1 ".concat(a?"opacity-100":"opacity-50"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat(a?"bg-indigo-600 text-white":"bg-white/5 border border-white/10 text-slate-400"),children:a?(0,s.jsx)(CheckCircle2,{className:"h-5 w-5"}):"1"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:"Upload"})]}),(0,s.jsx)("div",{className:"flex-1 h-0.5 mx-2 ".concat(a?"bg-indigo-600":"bg-white/10")}),(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1 ".concat(E?"opacity-100":"opacity-50"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat(E?"bg-indigo-600 text-white":"bg-white/5 border border-white/10 text-slate-400"),children:E?(0,s.jsx)(m.Z,{className:"h-5 w-5 animate-spin"}):"2"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:"Processing"})]}),(0,s.jsx)("div",{className:"flex-1 h-0.5 mx-2 ".concat(C.length>0?"bg-indigo-600":"bg-white/10")}),(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1 ".concat(C.length>0?"opacity-100":"opacity-50"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat(C.length>0?"bg-indigo-600 text-white":"bg-white/5 border border-white/10 text-slate-400"),children:C.length>0?(0,s.jsx)(CheckCircle2,{className:"h-5 w-5"}):"3"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:"Results"})]})]})}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("label",{className:"flex-1",children:[(0,s.jsx)("input",{type:"file",accept:".csv",onChange:e=>{try{var t;if((null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.files)&&e.target.files[0]){let t=e.target.files[0];eF(t)}}catch(e){console.error("Error handling file change:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"Failed to process file",variant:"destructive"})}},className:"hidden",id:"csv-upload"}),(0,s.jsx)("div",{onDragEnter:eC,onDragLeave:eC,onDragOver:eC,onDrop:e=>{try{var t;e.preventDefault(),e.stopPropagation(),U(!1),(null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&e.dataTransfer.files[0]&&eF(e.dataTransfer.files[0])}catch(e){console.error("Error handling file drop:",e),U(!1)}},className:"flex flex-col items-center justify-center w-full min-h-[200px] border-2 border-dashed rounded-2xl cursor-pointer transition-all backdrop-blur-xl bg-white/5 border-white/10 ".concat(A?"border-indigo-500 bg-indigo-500/20 shadow-lg shadow-indigo-500/30 scale-[1.02]":"hover:border-indigo-500/50 hover:bg-white/10"),children:a?(0,s.jsxs)("div",{className:"text-center p-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-indigo-500/20 flex items-center justify-center mb-4 mx-auto",children:(0,s.jsx)(h.Z,{className:"h-8 w-8 text-indigo-400"})}),(0,s.jsx)("p",{className:"text-base text-white font-semibold mb-1",children:a.name}),(0,s.jsxs)("p",{className:"text-sm text-slate-400",children:[(a.size/1024).toFixed(1)," KB"]}),(0,s.jsx)("p",{className:"text-xs text-indigo-400 mt-2",children:"Ready to process"})]}):(0,s.jsxs)("div",{className:"text-center p-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-4 mx-auto",children:(0,s.jsx)(u.Z,{className:"h-8 w-8 text-slate-400"})}),(0,s.jsx)("p",{className:"text-base text-white font-medium mb-2",children:(ef&&"function"==typeof ef?ef("upload.placeholder"):null)||"Click to upload CSV file"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Drag & drop or click to browse"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Max 5MB • Up to 1000 rows"})]})})]})}),(0,s.jsx)(k.M,{children:E&&(0,s.jsxs)(F.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-[#94a3b8]",children:M.total>0?"Processing ".concat(M.current,"/").concat(M.total," cars..."):"Processing..."}),(0,s.jsxs)("span",{className:"text-[#5B7FFF] font-medium",children:[P,"%"]})]}),(0,s.jsx)("div",{className:"w-full h-2 bg-white/5 rounded-full overflow-hidden border border-white/10",children:(0,s.jsx)(F.E.div,{className:"h-full bg-[#5B7FFF]",initial:{width:0},animate:{width:"".concat(P,"%")},transition:{duration:.3}})})]})}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsx)(i.z,{onClick:e_,disabled:!a||E,className:"flex-1 bg-[#5B7FFF] hover:bg-[#5B7FFF]/90 min-w-[120px]",children:E?"Processing...":(ef&&"function"==typeof ef?ef("process"):null)||"Process"}),(0,s.jsxs)(i.z,{onClick:()=>{try{let e=y().unparse([{year:"2020",mileage:"30000",engine_size:"2.5",cylinders:"4",make:"Toyota",model:"Camry",condition:"Good",fuel_type:"Gasoline",location:"California"},{year:"2019",mileage:"45000",engine_size:"3.5",cylinders:"6",make:"Honda",model:"Accord",condition:"Excellent",fuel_type:"Gasoline",location:"New York"},{year:"2021",mileage:"15000",engine_size:"2.0",cylinders:"4",make:"Ford",model:"Fusion",condition:"Very Good",fuel_type:"Hybrid",location:"Texas"}]),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","sample_batch_cars.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),(null==ej?void 0:ej.toast)&&ej.toast({title:eg("success"),description:"Sample CSV downloaded successfully"})}catch(e){console.error("Error downloading sample CSV:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:eg("error")||"Error",description:"Failed to download sample CSV",variant:"destructive"})}},variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10 text-white",children:[(0,s.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Download Sample CSV"]}),a&&!E&&(0,s.jsx)(i.z,{onClick:()=>{w(null),z([]),R(0),L({current:0,total:0})},variant:"outline",size:"icon",className:"border-white/10 bg-white/5 hover:bg-white/10 text-white",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})})]})]})]}),(0,s.jsxs)("div",{className:"mb-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5 text-[#5B7FFF]"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Predict Price from Car Listing URL"})]}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Paste a car listing URL to extract details and predict price"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(N.I,{type:"url",placeholder:"https://www.iqcars.net/en/car/...",value:q,onChange:e=>$(e.target.value),onKeyDown:e=>{"Enter"!==e.key||W||eP()},disabled:W,className:"pr-12"}),X&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)(B,{platform:X})})]}),(0,s.jsx)(i.z,{onClick:eP,disabled:!q.trim()||W,className:"bg-[#5B7FFF] hover:bg-[#5B7FFF]/90 min-w-[180px]",children:W?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):"Analyze & Predict Price"})]}),W&&(0,s.jsx)(Z,{isLoading:W})]}),(0,s.jsx)(k.M,{children:er&&(0,s.jsx)(eV,{error:er,onRetry:eP,onDismiss:()=>el(null)})}),(0,s.jsx)(k.M,{children:ep&&(0,s.jsx)(O,{extractedData:ep.extracted_data,predictedPrice:ep.predicted_price,listingPrice:ep.listing_price,priceComparison:ep.price_comparison,confidenceInterval:ep.confidence_interval,listingUrl:ep.listing_url,carImage:ep.car_image,message:ep.message})})]})]}),ev.length>0&&(0,s.jsx)(en,{results:ev,onFilterChange:K}),(0,s.jsx)(k.M,{children:ek&&(0,s.jsx)(F.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"mb-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-[#94a3b8] mb-1",children:"Total Cars"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:ek.total})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-[#94a3b8] mb-1",children:"Successful"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-500",children:ek.successful})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-[#94a3b8] mb-1",children:"Failed"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-500",children:ek.failed})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-[#94a3b8] mb-1",children:"Average Price"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-[#5B7FFF]",children:(0,j.xG)(ek.averagePrice)})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-[#94a3b8] mb-1",children:"Best Deal"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-green-500",children:ek.bestDeal})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-[#94a3b8] mb-1",children:"Highest Value"}),(0,s.jsx)("p",{className:"text-xl font-semibold text-[#5B7FFF]",children:ek.highestValue})]})]})})}),ev.length>0&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Analytics Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Visual insights into your batch predictions"})]}),(0,s.jsx)("div",{ref:ei,children:(0,s.jsx)(et,{results:ev})})]}),(0,s.jsx)(eU,{}),ea.size>0&&(0,s.jsx)(eE,{results:ey,selectedIds:ea,onSelectionChange:(e,t)=>{let a=new Set(ea);t?a.size<4&&a.add(e):a.delete(e),es(a)},onClearSelection:()=>es(new Set)}),(0,s.jsx)(k.M,{children:e&&!ed&&ey.length>0&&(0,s.jsx)(F.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.4},children:(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:(ef&&"function"==typeof ef?ef("results.title"):null)||"Results"}),(0,s.jsxs)("p",{className:"text-sm text-[#94a3b8]",children:[ey.length," cars processed"]})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)(i.z,{onClick:()=>{if(0===ey.length){(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:"No results to export",variant:"destructive"});return}try{let e=ey.map(e=>{var t,a,s,r,l,i,n;return{make:e.car.make,model:e.car.model,year:e.car.year,mileage:e.car.mileage,condition:e.car.condition,fuel_type:e.car.fuel_type,location:e.car.location,predicted_price:e.predicted_price,confidence_percent:null!==(s=e.confidence_percent)&&void 0!==s?s:"N/A",price_range_min:null!==(r=null===(t=e.price_range)||void 0===t?void 0:t.min)&&void 0!==r?r:"N/A",price_range_max:null!==(l=null===(a=e.price_range)||void 0===a?void 0:a.max)&&void 0!==l?l:"N/A",deal_rating:null!==(i=e.deal_rating)&&void 0!==i?i:"N/A",error:null!==(n=e.error)&&void 0!==n?n:""}}),t=y().unparse(e),a=new Blob([t],{type:"text/csv;charset=utf-8;"});n.apiClient.downloadBlob(a,"batch_predictions.csv"),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("success"):null)||"Success",description:"CSV file exported successfully"})}catch(e){console.error("Error exporting CSV:",e),(null==ej?void 0:ej.toast)&&ej.toast({title:(eg&&"function"==typeof eg?eg("error"):null)||"Error",description:(null==e?void 0:e.message)||"Failed to export CSV",variant:"destructive"})}},variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10 text-white",children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),(0,s.jsxs)(i.z,{onClick:eD,variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10 text-white",children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Export Excel"]}),(0,s.jsx)(ez,{results:ev,statsDashboardRef:ei})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-2xl backdrop-blur-xl bg-white/5 border border-white/10",children:(0,s.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,s.jsxs)(v.iA,{className:"min-w-full",children:[(0,s.jsx)(v.xD,{children:(0,s.jsxs)(v.SC,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] w-12 hidden md:table-cell font-semibold",children:"Compare"}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] cursor-pointer hover:text-white transition-colors font-semibold",onClick:eS("make"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Make",eB("make")]})}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] cursor-pointer hover:text-white transition-colors font-semibold",onClick:eS("model"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Model",eB("model")]})}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] cursor-pointer hover:text-white transition-colors font-semibold",onClick:eS("year"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Year",eB("year")]})}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] hidden md:table-cell font-semibold",children:"Mileage"}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] hidden lg:table-cell font-semibold",children:"Condition"}),(0,s.jsx)(v.ss,{className:"text-right text-xs uppercase tracking-wider text-[#94a3b8] cursor-pointer hover:text-white transition-colors font-semibold",onClick:eS("predicted_price"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end",children:["Price",eB("predicted_price")]})}),(0,s.jsx)(v.ss,{className:"text-center text-xs uppercase tracking-wider text-[#94a3b8] cursor-pointer hover:text-white transition-colors hidden lg:table-cell font-semibold",onClick:eS("confidence"),children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:["Confidence",eB("confidence")]})}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] hidden xl:table-cell font-semibold",children:"Price Range"}),(0,s.jsx)(v.ss,{className:"text-center text-xs uppercase tracking-wider text-[#94a3b8] cursor-pointer hover:text-white transition-colors font-semibold",onClick:eS("deal_rating"),children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:["Deal",eB("deal_rating")]})}),(0,s.jsx)(v.ss,{className:"text-xs uppercase tracking-wider text-[#94a3b8] text-center font-semibold",children:"Error"})]})}),(0,s.jsx)(v.RM,{children:(0,s.jsx)(k.M,{children:ey.map((e,t)=>{let a="".concat(e.car.make,"-").concat(e.car.model,"-").concat(e.car.year,"-").concat(t);return eo.isFavorite(a),(0,s.jsxs)(F.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.02*t},className:"border-b border-white/10 hover:bg-white/10 hover:backdrop-blur-md transition-all cursor-pointer",children:[(0,s.jsx)(v.pj,{className:"text-center hidden md:table-cell",children:(0,s.jsx)(eO.X,{checked:ea.has(t),onCheckedChange:e=>{let a=new Set(ea);e&&a.size<4?a.add(t):a.delete(t),es(a)}})}),(0,s.jsx)(v.pj,{className:"text-white font-medium",children:e.car.make}),(0,s.jsx)(v.pj,{className:"text-white",children:e.car.model}),(0,s.jsx)(v.pj,{className:"text-white",children:e.car.year}),(0,s.jsxs)(v.pj,{className:"text-white hidden md:table-cell",children:[e.car.mileage.toLocaleString()," km"]}),(0,s.jsx)(v.pj,{className:"text-white hidden lg:table-cell",children:e.car.condition}),(0,s.jsx)(v.pj,{className:"text-right font-semibold text-[#5B7FFF]",children:e.error?(0,s.jsx)("span",{className:"text-red-500",children:"N/A"}):(0,j.xG)(e.predicted_price)}),(0,s.jsx)(v.pj,{className:"text-center hidden lg:table-cell",children:void 0!==e.confidence_percent?(0,s.jsx)(ex,{result:e,children:(0,s.jsxs)("span",{className:"font-medium cursor-pointer hover:underline ".concat(e.confidence_percent>=80?"text-green-500":e.confidence_percent>=60?"text-yellow-500":"text-red-500"),children:[e.confidence_percent,"%"]})}):(0,s.jsx)("span",{className:"text-[#94a3b8]",children:"N/A"})}),(0,s.jsx)(v.pj,{className:"text-[#94a3b8] text-sm hidden xl:table-cell",children:e.price_range?(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:(0,j.xG)(e.price_range.min)}),(0,s.jsxs)("span",{className:"text-xs",children:["to ",(0,j.xG)(e.price_range.max)]})]}):"N/A"}),(0,s.jsx)(v.pj,{className:"text-center",children:e.deal_rating&&ek&&(0,s.jsx)(ec,{result:e,averagePrice:ek.averagePrice,children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold cursor-help ".concat("Good"===e.deal_rating?"bg-green-500/30 text-green-400 shadow-lg shadow-green-500/20":"Poor"===e.deal_rating?"bg-red-500/30 text-red-400 shadow-lg shadow-red-500/20":"bg-yellow-500/30 text-yellow-400 shadow-lg shadow-yellow-500/20"),children:e.deal_rating})})}),(0,s.jsx)(v.pj,{className:"text-center",children:e.error?(0,s.jsx)("span",{className:"text-red-500 text-xs",title:e.error,children:"⚠️"}):(0,s.jsx)("span",{className:"text-green-500",children:"✓"})})]},t)})})})]})})})]})})}),e&&ed&&ey.length>0&&(0,s.jsx)(eR,{results:ey,isFavorite:e=>{let t=ey[e],a="".concat(t.car.make,"-").concat(t.car.model,"-").concat(t.car.year,"-").concat(e);return eo.isFavorite(a)},onToggleFavorite:e=>{let t=ey[e],a="".concat(t.car.make,"-").concat(t.car.model,"-").concat(t.car.year,"-").concat(e);eo.toggleFavorite({id:a,make:t.car.make,model:t.car.model,year:t.car.year,predictedPrice:t.predicted_price,timestamp:Date.now()})},onViewDetails:e=>{ey[e]}})]})})}},31478:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var s=a(57437),r=a(2265),l=a(1657);let i=r.forwardRef((e,t)=>{let{className:a,variant:r="default",...i}=e,n={default:"bg-[#5B7FFF] text-white",success:"bg-green-600 text-white",warning:"bg-yellow-600 text-white",destructive:"bg-red-600 text-white",secondary:"bg-[#2a2d3a] text-[#94a3b8]",outline:"border border-[#2a2d3a] text-white"};return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n[r]||n.default,a),...i})});i.displayName="Badge"},54900:function(e,t,a){"use strict";a.d(t,{X:function(){return c}});var s=a(57437),r=a(2265),l=a(66062),i=a(1657),n=a(62442);let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-[#2a2d3a] bg-[#0f1117] ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#5B7FFF] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-[#5B7FFF] data-[state=checked]:text-white data-[state=checked]:border-[#5B7FFF]",a),...r,children:(0,s.jsx)(l.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})})});c.displayName=l.fC.displayName},29691:function(e,t,a){"use strict";a.d(t,{Fw:function(){return o},wy:function(){return c},zF:function(){return n}});var s=a(57437),r=a(2265),l=a(91927),i=a(1657);let n=l.fC,c=l.xz,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,i.cn)("overflow-hidden data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down",a),...r})});o.displayName=l.VY.displayName},42706:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return b},Vq:function(){return c},cN:function(){return u},cZ:function(){return m},fK:function(){return h},hg:function(){return o}});var s=a(57437),r=a(2265),l=a(79515),i=a(82549),n=a(1657);let c=l.fC,o=l.xz,d=l.h_;l.x8;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-[1100] bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});x.displayName=l.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...c}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(l.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-[1100] grid w-full max-w-lg max-h-[90vh] overflow-y-auto overscroll-contain translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 dark:border-[#2a2d3a] bg-white dark:bg-[#1a1d29] p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[r,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 text-slate-600 dark:text-[#94a3b8]"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...r})});p.displayName=l.Dx.displayName;let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-slate-600 dark:text-[#94a3b8]",a),...r})});b.displayName=l.dk.displayName},81568:function(e,t,a){"use strict";a.d(t,{O:function(){return l}});var s=a(57437),r=a(1657);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-[#2a2d3a]",t),...a})}},19160:function(e,t,a){"use strict";a.d(t,{RM:function(){return c},SC:function(){return o},iA:function(){return i},pj:function(){return x},ss:function(){return d},xD:function(){return n}});var s=a(57437),r=a(2265),l=a(1657);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});i.displayName="Table";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...r})});n.displayName="TableHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});c.displayName="TableBody";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b border-[#2a2d3a] transition-colors hover:bg-[#2a2d3a]/50 data-[state=selected]:bg-[#2a2d3a]",a),...r})});o.displayName="TableRow";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-[#94a3b8] [&:has([role=checkbox])]:pr-0",a),...r})});d.displayName="TableHead";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});x.displayName="TableCell"},23444:function(e,t,a){"use strict";a.d(t,{g:function(){return i}});var s=a(57437),r=a(2265),l=a(1657);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-white/[0.03] backdrop-blur-sm px-4 py-3 text-base text-slate-900 dark:text-white/90 ring-offset-background placeholder:text-slate-400 dark:placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/30 focus-visible:ring-offset-2 focus-visible:border-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-300 hover:border-indigo-500/50 dark:hover:border-indigo-500/50 hover:bg-slate-50 dark:hover:bg-white/[0.05] resize-none",a),ref:t,...r})});i.displayName="Textarea"}},function(e){e.O(0,[2505,7337,7895,116,263,4829,6376,7169,7633,8777,555,9782,4049,7158,8155,3572,3775,2971,4938,1744],function(){return e(e.s=28773)}),_N_E=e.O()}]);