"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{30932:function(e,t,i){i.r(t),i.d(t,{PriceRevealCard:function(){return w}});var a=i(57437),r=i(2265),n=i(20609),o=i(93622),l=i(98777),s=i(51502),c=i(1657),d=i(85754),u=i(29764),p=i(62442),m=i(9864),h=i(68034),v=i(25703),f=i(86095),x=i(24033),y=i(50116),g=i(35498);function w(e){var t,i,w,b;let{result:j,carFeatures:N,predictionId:E}=e,{displayValue:k,isAnimating:S}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,[i,a]=(0,r.useState)(0),[n,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{o(!0),a(0);let i=Date.now(),r=e=>1===e?1:1-Math.pow(2,-10*e),n=()=>{let l=Math.min((Date.now()-i)/t,1);a(Math.floor(0+(e-0)*r(l))),l<1?requestAnimationFrame(n):(a(e),o(!1))};requestAnimationFrame(n)},[e,t]),{displayValue:i,isAnimating:n}}(j.predicted_price,1500),[C,_]=(0,r.useState)(!1),[P,D]=(0,r.useState)(!1),[I,L]=(0,r.useState)(!1),R=(0,r.useRef)(null),{toast:T}=(0,v.useToast)(),{isAuthenticated:A}=(0,f.a)(),M=(0,x.useRouter)(),q=(0,y.useLocale)(),F=null!==(w=null===(t=j.confidence_interval)||void 0===t?void 0:t.lower)&&void 0!==w?w:.85*j.predicted_price,z=null!==(b=null===(i=j.confidence_interval)||void 0===i?void 0:i.upper)&&void 0!==b?b:1.15*j.predicted_price,O="high"===j.confidence_level?98:"medium"===j.confidence_level?85:72;(0,r.useEffect)(()=>{if(!S&&!I&&k===j.predicted_price){L(!0);let e=Date.now()+3e3,t={startVelocity:30,spread:360,ticks:60,zIndex:9999},i=setInterval(()=>{let a=e-Date.now();if(a<=0)return clearInterval(i);(0,h.Z)({...t,particleCount:a/3e3*50,origin:{x:.8*Math.random()+.1,y:Math.random()-.2},colors:["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444"]})},250);return()=>clearInterval(i)}},[S,I,k,j.predicted_price]);let Z=(0,n.c)(-100),G=(0,o.q)(Z,{stiffness:50,damping:30});(0,r.useEffect)(()=>{let e=setInterval(()=>{Z.set(100),setTimeout(()=>Z.set(-100),2e3)},4e3);return()=>clearInterval(e)},[Z]);let H=async()=>{let e="\uD83D\uDE97 ".concat(N.year," ").concat(N.make," ").concat(N.model,"\n\uD83D\uDCB0 Predicted Price: ").concat((0,c.xG)(j.predicted_price),"\n\nCheck out CarWiseIQ for accurate car price predictions!"),t=window.location.href;if(navigator.share)try{await navigator.share({title:"Car Price Prediction",text:e,url:t}),T({title:"Shared!",description:"Prediction shared successfully"})}catch(i){"AbortError"!==i.name&&navigator.clipboard&&(await navigator.clipboard.writeText("".concat(e,"\n").concat(t)),T({title:"Copied!",description:"Prediction link copied to clipboard"}))}else navigator.clipboard&&(await navigator.clipboard.writeText("".concat(e,"\n").concat(t)),T({title:"Copied!",description:"Prediction link copied to clipboard"}))},V=async()=>{if(!A){T({title:"Login Required",description:"Please login to save predictions to your history",variant:"destructive"}),M.push("/".concat(q,"/login"));return}D(!0);try{if(E){_(!0),T({title:"Already Saved",description:"This prediction is already in your history"}),setTimeout(()=>_(!1),3e3);return}let e=JSON.parse(localStorage.getItem("saved_predictions")||"[]"),t={id:Date.now().toString(),timestamp:new Date().toISOString(),carFeatures:N,result:j,displayName:"".concat(N.year," ").concat(N.make," ").concat(N.model)};e.unshift(t),localStorage.setItem("saved_predictions",JSON.stringify(e.slice(0,50))),g.activityHelpers.logPredictionSaved(t.id),_(!0),T({title:"Saved!",description:"Prediction saved to your history"}),setTimeout(()=>_(!1),3e3)}catch(e){T({title:"Error",description:"Failed to save prediction",variant:"destructive"})}finally{D(!1)}};return(0,a.jsxs)(l.E.div,{ref:R,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.6,ease:[.16,1,.3,1]},className:"relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"backdrop-blur-xl bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[(0,a.jsx)(l.E.div,{style:{x:(0,s.H)(G,e=>"".concat(e,"%"))},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 pointer-events-none z-10"}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)(l.E.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"text-2xl md:text-3xl font-bold text-white mb-2",children:[N.year," ",N.make," ",N.model,N.trim&&" ".concat(N.trim)]}),(0,a.jsx)(l.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-slate-400 text-sm",children:"Predicted Market Value"})]}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.6,ease:[.16,1,.3,1]},className:"relative inline-block",children:[(0,a.jsx)("div",{className:"text-6xl md:text-7xl lg:text-8xl font-bold tracking-tight",style:{background:"linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 30px rgba(16, 185, 129, 0.5))",textShadow:"0 0 40px rgba(59, 130, 246, 0.6)"},children:(0,c.xG)(k)}),S&&(0,a.jsx)(l.E.div,{className:"absolute inset-0 bg-gradient-to-r from-emerald-400/30 via-indigo-400/30 to-purple-400/30 blur-2xl -z-10",animate:{opacity:[.5,.8,.5],scale:[1,1.1,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"}})]}),(0,a.jsxs)(l.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.5},className:"text-slate-400 text-sm md:text-base mt-4",children:["Range: ",(0,c.xG)(F)," - ",(0,c.xG)(z)]})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.5},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Confidence Score"}),(0,a.jsxs)("span",{className:"text-emerald-400 font-semibold",children:[O,"% Accurate"]})]}),(0,a.jsx)("div",{className:"relative h-3 bg-white/5 rounded-full overflow-hidden border border-white/10",children:(0,a.jsx)(l.E.div,{initial:{width:0},animate:{width:"".concat(O,"%")},transition:{delay:1.5,duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-emerald-500 via-indigo-500 to-purple-500 rounded-full relative overflow-hidden",children:(0,a.jsx)(l.E.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})})})]}),(0,a.jsx)("p",{className:"text-center text-xs text-slate-500",children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6,duration:.5},className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,a.jsxs)(d.z,{onClick:H,className:"flex-1 h-12 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white shadow-lg shadow-indigo-500/30 font-semibold",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),"Share Result"]}),(0,a.jsx)(d.z,{onClick:V,disabled:P||C,variant:"outline",className:"flex-1 h-12 border-white/20 bg-white/5 hover:bg-white/10 text-white font-semibold",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Saved!"]}):(0,a.jsxs)(a.Fragment,{children:[P?(0,a.jsx)(l.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"inline-block",children:(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2 inline-block"})}):(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),P?"Saving...":"Save to History"]})})]})]})}},86095:function(e,t,i){i.d(t,{a:function(){return n}});var a=i(2265),r=i(63572);function n(){let[e,t]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),l=(0,a.useRef)(!1),s=(0,a.useRef)(!1),c=(0,a.useCallback)(async()=>{if(!l.current)try{l.current=!0;try{let{supabase:e}=await Promise.all([i.e(3226),i.e(5922)]).then(i.bind(i,45922)),{data:{session:a}}=await e.auth.getSession();if(null==a?void 0:a.user){t({id:0,email:a.user.email||""}),o(!1);return}}catch(e){}if(!(0,r.LP)()){t(null),o(!1);return}try{let e=await r.apiClient.getMe();if(e&&"object"==typeof e&&e.email)t(e);else throw Error("Invalid user data received")}catch(i){var e,a;((null==i?void 0:null===(e=i.response)||void 0===e?void 0:e.status)===401||(null==i?void 0:null===(a=i.response)||void 0===a?void 0:a.status)===403)&&((0,r.gy)(),t(null))}}catch(e){(0,r.LP)()&&(0,r.gy)(),t(null)}finally{o(!1),l.current=!1}},[]);return(0,a.useEffect)(()=>{s.current||(s.current=!0,c())},[]),(0,a.useEffect)(()=>{let e=()=>{l.current||c()};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[c]),{user:e,loading:n,login:async function(e,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(!e||!i)throw Error("Email and password are required");let n=await r.apiClient.login(e,i,a||!1);if(n&&n.user&&"object"==typeof n.user)t(n.user);else throw Error("Invalid user data in response");return await c(),n}catch(e){throw console.error("[useAuth.login] Login error:",e),e}},register:async function(e,i,a,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{if(!e||!i)throw Error("Email and password are required");let l=await r.apiClient.register(e,i,a,n,o);return l&&l.user&&"object"==typeof l.user&&t(l.user),l}catch(e){throw console.error("Register error:",e),e}},logout:async()=>{try{t(null),await r.apiClient.logout(),(0,r.gy)()}catch(e){console.error("Logout error:",e),t(null),(0,r.gy)()}},checkAuth:c,verify:async()=>{try{let e=await r.apiClient.verifyToken();if(e&&e.valid&&e.user&&"object"==typeof e.user)return t(e.user),!0;return!1}catch(e){return console.error("Verify error:",e),t(null),!1}},isAuthenticated:!!e}}}}]);